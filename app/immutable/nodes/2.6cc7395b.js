import{w as Je}from"../chunks/index.3aa52984.js";import{s as ce,i as Fe,n as P,o as Xe,r as Ze,b as le,f as ne}from"../chunks/scheduler.ba2ce6c0.js";import{S as ae,i as he,g as C,h as k,j as D,f as m,k as E,l as y,a as w,z as $,A as ge,m as F,s as V,n as K,c as N,y as I,e as ee,B as L,o as me,x as fe,d as T,p as ze,b as ve,t as H,r as se,u as re,v as ue,w as oe,C as Qe,D as Ee,E as ie}from"../chunks/index.be9bd1cf.js";function G(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}const we="drumline-puzzle",Ke=26,Ye=Array.from({length:Ke},(l,e)=>(e+1).toString()),je=Array.from({length:Ke},(l,e)=>String.fromCharCode(e+65)),xe=je.map(l=>l.toLowerCase()),$e="ROWS",et="BANDS";function ye(l,e){const[t]=l.split(e,1),n=l.slice(t.length+e.length);return[t,n]}function De(l,e){let t=[],n=[...e],s=n.shift();for(const i of l){let[r,o]=ye(i," ");if(r===s&&(t.push([]),s=n.shift(),[r,o]=ye(o," ")),t.length===0)continue;let u=t[t.length-1],f=xe[u.length];if(r===f)u.push({identifier:f,text:o,answer:""});else{if(u.length===0)continue;u[u.length-1].text+=" "+i}}return t}function tt(l){let e=[],t=[],n=!1,s=!1,i=null;for(const u of l){const f=u.trim();if(f.length!==0){if(!n&&f===$e){n=!0,i=e;continue}if(!s&&f===et){s=!0,i=t;continue}i!==null&&i.push(f)}}let r=De(e,Ye),o=De(t,je);return[r.map(u=>({clues:u})),o.map(u=>({clues:u,start_offset:0}))]}var pe=l=>{if(l===void 0)return!1;const e=Math.floor(l.size/2);for(let t=0;t<l.size;t++)for(let n=0;n<l.size;n++)if(!(t===e&&n===e)&&l.grid[t][n]===" ")return!1;return!0},Ie=(l,e,t)=>{if(l===void 0)return!1;if(e){for(let i=t;i<l.size-t;i++)if(l.grid[i][t]===" "||l.grid[i][l.size-t-1]===" "||l.grid[t][i]===" "||l.grid[l.size-t-1][i]===" ")return!1;return!0}let n=t;const s=Math.floor(l.size/2);for(let i=0;i<l.size;i++)if(l.grid[n][i]===" "){if(n===s&&i===s)continue;return!1}return!0};function lt(l){const e=l.split(`
`),[t,n]=tt(e);if(t.length===0)throw new Error("No rows found");if(n.length===0)throw new Error("No bands found");const s=n.length*2+1;if(t.length!==s)throw new Error(`Expected ${s} rows, because we had ${n.length} bands but found ${t.length} rows instead`);const i=t.length;let r=[];for(let o=0;o<i;o++){r[o]=[];for(let u=0;u<i;u++)r[o][u]=" "}return{input_text:l,size:t.length,rows:t,bands:n,grid:r}}const nt=null,Re=window.localStorage.getItem(we)??nt,We=Re?JSON.parse(Re):null,_e=Je(We);_e.subscribe(l=>{l?window.localStorage.setItem(we,JSON.stringify(l)):window.localStorage.removeItem(we)});async function it(){return{inputText:"",puzzle:We,parseError:""}}const It=Object.freeze(Object.defineProperty({__proto__:null,load:it},Symbol.toStringTag,{value:"Module"}));function Se(l,e,t){const n=l.slice();return n[18]=e[t],n[20]=t,n}function Be(l,e,t){const n=l.slice();return n[18]=e[t],n[22]=t,n}function st(l){let e,t=l[0].grid[l[20]][l[22]]+"",n,s,i,r;function o(){return l[11](l[20],l[22])}return{c(){e=C("div"),n=F(t),this.h()},l(u){e=k(u,"DIV",{class:!0});var f=D(e);n=K(f,t),f.forEach(m),this.h()},h(){E(e,"class",s="letter "+l[7](l[20],l[22])+" svelte-13j9ogb"),L(e,"selected",l[3]===l[20]&&l[4]===l[22]),L(e,"highlight",l[1]===l[20]||l[2]===Q(l[20],l[22],l[5]))},m(u,f){w(u,e,f),I(e,n),i||(r=$(e,"click",o),i=!0)},p(u,f){l=u,f&1&&t!==(t=l[0].grid[l[20]][l[22]]+"")&&me(n,t),f&128&&s!==(s="letter "+l[7](l[20],l[22])+" svelte-13j9ogb")&&E(e,"class",s),f&152&&L(e,"selected",l[3]===l[20]&&l[4]===l[22]),f&166&&L(e,"highlight",l[1]===l[20]||l[2]===Q(l[20],l[22],l[5]))},d(u){u&&m(e),i=!1,r()}}}function rt(l){let e,t=" ",n,s;return{c(){e=C("div"),e.textContent=t,this.h()},l(i){e=k(i,"DIV",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-12uxfnc"&&(e.textContent=t),this.h()},h(){E(e,"class","letter center-cell svelte-13j9ogb")},m(i,r){w(i,e,r),n||(s=$(e,"click",function(){Fe(l[10])&&l[10].apply(this,arguments)}),n=!0)},p(i,r){l=i},d(i){i&&m(e),n=!1,s()}}}function Te(l){let e;function t(i,r){return i[20]===i[6]&&i[22]===i[6]?rt:st}let s=t(l)(l);return{c(){s.c(),e=ee()},l(i){s.l(i),e=ee()},m(i,r){s.m(i,r),w(i,e,r)},p(i,r){s.p(i,r)},d(i){i&&m(e),s.d(i)}}}function Ae(l){let e,t,n=l[20]+1+"",s,i,r,o,u=G({length:l[5]}),f=[];for(let g=0;g<u.length;g+=1)f[g]=Te(Be(l,u,g));return{c(){e=C("h2"),t=F("Row "),s=F(n),i=V(),r=C("div");for(let g=0;g<f.length;g+=1)f[g].c();o=V(),this.h()},l(g){e=k(g,"H2",{class:!0});var h=D(e);t=K(h,"Row "),s=K(h,n),h.forEach(m),i=N(g),r=k(g,"DIV",{class:!0});var c=D(r);for(let d=0;d<f.length;d+=1)f[d].l(c);o=N(c),c.forEach(m),this.h()},h(){E(e,"class","visually-hidden"),E(r,"class","row svelte-13j9ogb")},m(g,h){w(g,e,h),I(e,t),I(e,s),w(g,i,h),w(g,r,h);for(let c=0;c<f.length;c+=1)f[c]&&f[c].m(r,null);I(r,o)},p(g,h){if(h&1791){u=G({length:g[5]});let c;for(c=0;c<u.length;c+=1){const d=Be(g,u,c);f[c]?f[c].p(d,h):(f[c]=Te(d),f[c].c(),f[c].m(r,o))}for(;c<f.length;c+=1)f[c].d(1);f.length=u.length}},d(g){g&&(m(e),m(i),m(r)),ge(f,g)}}}function ut(l){let e,t,n,s=G({length:l[5]}),i=[];for(let r=0;r<s.length;r+=1)i[r]=Ae(Se(l,s,r));return{c(){e=C("div");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=k(r,"DIV",{class:!0,style:!0});var o=D(e);for(let u=0;u<i.length;u+=1)i[u].l(o);o.forEach(m),this.h()},h(){E(e,"class","grid svelte-13j9ogb"),y(e,"--puzzle-size",l[5])},m(r,o){w(r,e,o);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(e,null);t||(n=$(window,"keydown",function(){Fe(l[8])&&l[8].apply(this,arguments)}),t=!0)},p(r,[o]){if(l=r,o&1791){s=G({length:l[5]});let u;for(u=0;u<s.length;u+=1){const f=Se(l,s,u);i[u]?i[u].p(f,o):(i[u]=Ae(f),i[u].c(),i[u].m(e,null))}for(;u<i.length;u+=1)i[u].d(1);i.length=s.length}o&32&&y(e,"--puzzle-size",l[5])},i:P,o:P,d(r){r&&m(e),ge(i,r),t=!1,n()}}}function Q(l,e,t){const n=Math.min(l,t-l-1),s=Math.min(e,t-e-1);return Math.min(n,s)}function ot(l,e,t){let{puzzle:n}=e,{size:s=n.rows.length}=e,{highlightRow:i=-1}=e,{highlightBand:r=-1}=e,{selectedRow:o=-1}=e,{selectedCol:u=-1}=e;const f=Math.floor(s/2);let{getCellClass:g=(a,v)=>Q(a,v,s)%2===0?"even-band":"odd-band"}=e;function h(a,v){return a>=0&&a<s&&v>=0&&v<s}function c(){return r!==-1}function d(a=!1){let v=u;return a?u>0&&(v=v-1):u<s-1&&(v=v+1,v===f&&o===f&&(v=v+1)),[o,v]}function _(a){const v=[0,1],B=[1,0],S=[0,-1],be=[-1,0],j=Q(o,u,s);let W=[];o===j&&W.push(v),o===s-j-1&&W.push(S),u===j&&W.push(be),u===s-j-1&&W.push(B);for(const[J,de]of W){const x=o+(a?-J:J),te=u+(a?-de:de);if(h(x,te)&&Q(x,te,s)===j)return[x,te]}throw new Error("Could not find next cell in band")}function b(a){return c()?_(a):d(a)}let{onKeyDown:R=a=>{if(a.altKey||a.ctrlKey||a.metaKey||o===-1||u===-1)return;let v=o,B=u;switch(a.key){case"ArrowDown":v<s-1&&(v=v+1);break;case"ArrowUp":v>0&&(v=v-1);break;case"ArrowLeft":B>0&&(B=B-1);break;case"ArrowRight":B<s-1&&(B=B+1);break;case" ":M(),a.preventDefault();return;case"Backspace":if(n.grid[o][u]===" "){[v,B]=b(!0),t(0,n.grid[v][B]=" ",n),q(v,B),a.preventDefault();return}else{t(0,n.grid[o][u]=" ",n),a.preventDefault();return}default:a.key.length===1&&(t(0,n.grid[o][u]=a.key.toUpperCase(),n),a.preventDefault()),[v,B]=b(!1)}q(v,B),a.preventDefault()}}=e;function M(){i!==-1?(t(2,r=Q(o,u,s)),t(1,i=-1)):(t(1,i=o),t(2,r=-1))}let{highlight:q=(a,v,B=!1)=>{if(o===a&&u===v){B&&M();return}i!==-1?t(1,i=a):t(2,r=Q(a,v,s)),t(3,o=a),t(4,u=v)}}=e,{clearHighlight:A=()=>{t(1,i=-1),t(2,r=-1)}}=e;const Y=(a,v)=>q(a,v,!0);return l.$$set=a=>{"puzzle"in a&&t(0,n=a.puzzle),"size"in a&&t(5,s=a.size),"highlightRow"in a&&t(1,i=a.highlightRow),"highlightBand"in a&&t(2,r=a.highlightBand),"selectedRow"in a&&t(3,o=a.selectedRow),"selectedCol"in a&&t(4,u=a.selectedCol),"getCellClass"in a&&t(7,g=a.getCellClass),"onKeyDown"in a&&t(8,R=a.onKeyDown),"highlight"in a&&t(9,q=a.highlight),"clearHighlight"in a&&t(10,A=a.clearHighlight)},[n,i,r,o,u,s,f,g,R,q,A,Y]}class ft extends ae{constructor(e){super(),he(this,e,ot,ut,ce,{puzzle:0,size:5,highlightRow:1,highlightBand:2,selectedRow:3,selectedCol:4,center:6,getCellClass:7,onKeyDown:8,highlight:9,clearHighlight:10})}get center(){return this.$$.ctx[6]}}function ct(l){let e,t,n=l[0].text+"",s;return{c(){e=C("div"),t=C("div"),s=F(n),this.h()},l(i){e=k(i,"DIV",{class:!0});var r=D(e);t=k(r,"DIV",{class:!0});var o=D(t);s=K(o,n),o.forEach(m),r.forEach(m),this.h()},h(){E(t,"class","clue-title"),E(e,"class","clue")},m(i,r){w(i,e,r),I(e,t),I(t,s)},p(i,[r]){r&1&&n!==(n=i[0].text+"")&&me(s,n)},i:P,o:P,d(i){i&&m(e)}}}function at(l,e,t){let{clue:n}=e;return l.$$set=s=>{"clue"in s&&t(0,n=s.clue)},[n]}class ht extends ae{constructor(e){super(),he(this,e,at,ct,ce,{clue:0})}}function Ve(l,e,t){const n=l.slice();return n[6]=e[t],n[8]=t,n}function Ne(l,e,t){const n=l.slice();return n[9]=e[t],n}function gt(l){let e=l[8]+1+"",t;return{c(){t=F(e)},l(n){t=K(n,e)},m(n,s){w(n,t,s)},p:P,d(n){n&&m(t)}}}function dt(l){let e=String.fromCharCode(65+l[8])+"",t;return{c(){t=F(e)},l(n){t=K(n,e)},m(n,s){w(n,t,s)},p:P,d(n){n&&m(t)}}}function qe(l){let e,t,n,s;return t=new ht({props:{clue:l[9]}}),{c(){e=C("div"),se(t.$$.fragment),n=V(),this.h()},l(i){e=k(i,"DIV",{class:!0});var r=D(e);re(t.$$.fragment,r),n=N(r),r.forEach(m),this.h()},h(){E(e,"class","clues-group-clue svelte-1qy37dg")},m(i,r){w(i,e,r),ue(t,e,null),I(e,n),s=!0},p(i,r){const o={};r&1&&(o.clue=i[9]),t.$set(o)},i(i){s||(T(t.$$.fragment,i),s=!0)},o(i){H(t.$$.fragment,i),s=!1},d(i){i&&m(e),oe(t)}}}function Oe(l){let e,t,n,s,i,r;function o(d,_){return d[2]?dt:gt}let u=o(l),f=u(l),g=G(l[6].clues),h=[];for(let d=0;d<g.length;d+=1)h[d]=qe(Ne(l,g,d));const c=d=>H(h[d],1,1,()=>{h[d]=null});return{c(){e=C("div"),t=C("div"),f.c(),n=V(),s=C("div");for(let d=0;d<h.length;d+=1)h[d].c();i=V(),this.h()},l(d){e=k(d,"DIV",{class:!0});var _=D(e);t=k(_,"DIV",{class:!0});var b=D(t);f.l(b),b.forEach(m),n=N(_),s=k(_,"DIV",{class:!0});var R=D(s);for(let M=0;M<h.length;M+=1)h[M].l(R);R.forEach(m),i=N(_),_.forEach(m),this.h()},h(){E(t,"class","clues-group-title svelte-1qy37dg"),E(s,"class","clues-group-list svelte-1qy37dg"),E(e,"class","clues-groups-group svelte-1qy37dg"),L(e,"highlightClue",l[3]===l[8]),L(e,"clueDone",Ie(l[4],l[2],l[8]))},m(d,_){w(d,e,_),I(e,t),f.m(t,null),I(e,n),I(e,s);for(let b=0;b<h.length;b+=1)h[b]&&h[b].m(s,null);I(e,i),r=!0},p(d,_){if(u===(u=o(d))&&f?f.p(d,_):(f.d(1),f=u(d),f&&(f.c(),f.m(t,null))),_&1){g=G(d[6].clues);let b;for(b=0;b<g.length;b+=1){const R=Ne(d,g,b);h[b]?(h[b].p(R,_),T(h[b],1)):(h[b]=qe(R),h[b].c(),T(h[b],1),h[b].m(s,null))}for(ze(),b=g.length;b<h.length;b+=1)c(b);ve()}(!r||_&8)&&L(e,"highlightClue",d[3]===d[8]),(!r||_&20)&&L(e,"clueDone",Ie(d[4],d[2],d[8]))},i(d){if(!r){for(let _=0;_<g.length;_+=1)T(h[_]);r=!0}},o(d){h=h.filter(Boolean);for(let _=0;_<h.length;_+=1)H(h[_]);r=!1},d(d){d&&m(e),f.d(),ge(h,d)}}}function _t(l){let e,t,n,s,i,r,o=G(l[0]),u=[];for(let g=0;g<o.length;g+=1)u[g]=Oe(Ve(l,o,g));const f=g=>H(u[g],1,1,()=>{u[g]=null});return{c(){e=C("div"),t=C("div"),n=F(l[1]),s=V(),i=C("div");for(let g=0;g<u.length;g+=1)u[g].c();this.h()},l(g){e=k(g,"DIV",{class:!0});var h=D(e);t=k(h,"DIV",{class:!0});var c=D(t);n=K(c,l[1]),c.forEach(m),s=N(h),i=k(h,"DIV",{class:!0});var d=D(i);for(let _=0;_<u.length;_+=1)u[_].l(d);d.forEach(m),h.forEach(m),this.h()},h(){E(t,"class","clues-title svelte-1qy37dg"),E(i,"class","clues-groups svelte-1qy37dg"),E(e,"class","clues svelte-1qy37dg")},m(g,h){w(g,e,h),I(e,t),I(t,n),I(e,s),I(e,i);for(let c=0;c<u.length;c+=1)u[c]&&u[c].m(i,null);r=!0},p(g,[h]){if((!r||h&2)&&me(n,g[1]),h&29){o=G(g[0]);let c;for(c=0;c<o.length;c+=1){const d=Ve(g,o,c);u[c]?(u[c].p(d,h),T(u[c],1)):(u[c]=Oe(d),u[c].c(),T(u[c],1),u[c].m(i,null))}for(ze(),c=o.length;c<u.length;c+=1)f(c);ve()}},i(g){if(!r){for(let h=0;h<o.length;h+=1)T(u[h]);r=!0}},o(g){u=u.filter(Boolean);for(let h=0;h<u.length;h+=1)H(u[h]);r=!1},d(g){g&&m(e),ge(u,g)}}}function mt(l,e,t){let{clueSection:n}=e,{clueTitle:s}=e,{useLetters:i=!1}=e,{highlightIdx:r=-1}=e,{lastIdx:o=-1}=e,{puzzle:u}=e;return l.$$set=f=>{"clueSection"in f&&t(0,n=f.clueSection),"clueTitle"in f&&t(1,s=f.clueTitle),"useLetters"in f&&t(2,i=f.useLetters),"highlightIdx"in f&&t(3,r=f.highlightIdx),"lastIdx"in f&&t(5,o=f.lastIdx),"puzzle"in f&&t(4,u=f.puzzle)},l.$$.update=()=>{l.$$.dirty&40&&o!==r&&t(5,o=r)},[n,s,i,r,u,o]}class Le extends ae{constructor(e){super(),he(this,e,mt,_t,ce,{clueSection:0,clueTitle:1,useLetters:2,highlightIdx:3,lastIdx:5,puzzle:4})}}function Me(l,e,t){const n=l.slice();return n[18]=e[t],n}function He(l){let e,t=G({length:l[6]}),n=[];for(let s=0;s<t.length;s+=1)n[s]=Pe(Me(l,t,s));return{c(){e=C("div");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=k(s,"DIV",{class:!0});var i=D(e);for(let r=0;r<n.length;r+=1)n[r].l(i);i.forEach(m),this.h()},h(){E(e,"class","confetti-holder svelte-io58ff"),L(e,"rounded",l[9]),L(e,"cone",l[10]),L(e,"no-gravity",l[11])},m(s,i){w(s,e,i);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null)},p(s,i){if(i&20991){t=G({length:s[6]});let r;for(r=0;r<t.length;r+=1){const o=Me(s,t,r);n[r]?n[r].p(o,i):(n[r]=Pe(o),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}i&512&&L(e,"rounded",s[9]),i&1024&&L(e,"cone",s[10]),i&2048&&L(e,"no-gravity",s[11])},d(s){s&&m(e),ge(n,s)}}}function Pe(l){let e;return{c(){e=C("div"),this.h()},l(t){e=k(t,"DIV",{class:!0,style:!0}),D(e).forEach(m),this.h()},h(){E(e,"class","confetti svelte-io58ff"),y(e,"--fall-distance",l[8]),y(e,"--size",l[0]+"px"),y(e,"--color",l[14]()),y(e,"--skew",O(-45,45)+"deg,"+O(-45,45)+"deg"),y(e,"--rotation-xyz",O(-10,10)+", "+O(-10,10)+", "+O(-10,10)),y(e,"--rotation-deg",O(0,360)+"deg"),y(e,"--translate-y-multiplier",O(l[2][0],l[2][1])),y(e,"--translate-x-multiplier",O(l[1][0],l[1][1])),y(e,"--scale",.1*O(2,10)),y(e,"--transition-duration",l[4]?`calc(${l[3]}ms * var(--scale))`:`${l[3]}ms`),y(e,"--transition-delay",O(l[5][0],l[5][1])+"ms"),y(e,"--transition-iteration-count",l[4]?"infinite":l[7]),y(e,"--x-spread",1-l[12])},m(t,n){w(t,e,n)},p(t,n){n&256&&y(e,"--fall-distance",t[8]),n&1&&y(e,"--size",t[0]+"px"),n&4&&y(e,"--translate-y-multiplier",O(t[2][0],t[2][1])),n&2&&y(e,"--translate-x-multiplier",O(t[1][0],t[1][1])),n&24&&y(e,"--transition-duration",t[4]?`calc(${t[3]}ms * var(--scale))`:`${t[3]}ms`),n&32&&y(e,"--transition-delay",O(t[5][0],t[5][1])+"ms"),n&144&&y(e,"--transition-iteration-count",t[4]?"infinite":t[7]),n&4096&&y(e,"--x-spread",1-t[12])},d(t){t&&m(e)}}}function zt(l){let e,t=!l[13]&&He(l);return{c(){t&&t.c(),e=ee()},l(n){t&&t.l(n),e=ee()},m(n,s){t&&t.m(n,s),w(n,e,s)},p(n,[s]){n[13]?t&&(t.d(1),t=null):t?t.p(n,s):(t=He(n),t.c(),t.m(e.parentNode,e))},i:P,o:P,d(n){n&&m(e),t&&t.d(n)}}}function O(l,e){return Math.random()*(e-l)+l}function vt(l,e,t){let{size:n=10}=e,{x:s=[-.5,.5]}=e,{y:i=[.25,1]}=e,{duration:r=2e3}=e,{infinite:o=!1}=e,{delay:u=[0,50]}=e,{colorRange:f=[0,360]}=e,{colorArray:g=[]}=e,{amount:h=50}=e,{iterationCount:c=1}=e,{fallDistance:d="100px"}=e,{rounded:_=!1}=e,{cone:b=!1}=e,{noGravity:R=!1}=e,{xSpread:M=.15}=e,{destroyOnComplete:q=!0}=e,A=!1;Xe(()=>{!q||o||c=="infinite"||setTimeout(()=>t(13,A=!0),(r+u[1])*c)});function Y(){return g.length?g[Math.round(Math.random()*(g.length-1))]:`hsl(${Math.round(O(f[0],f[1]))}, 75%, 50%`}return l.$$set=a=>{"size"in a&&t(0,n=a.size),"x"in a&&t(1,s=a.x),"y"in a&&t(2,i=a.y),"duration"in a&&t(3,r=a.duration),"infinite"in a&&t(4,o=a.infinite),"delay"in a&&t(5,u=a.delay),"colorRange"in a&&t(15,f=a.colorRange),"colorArray"in a&&t(16,g=a.colorArray),"amount"in a&&t(6,h=a.amount),"iterationCount"in a&&t(7,c=a.iterationCount),"fallDistance"in a&&t(8,d=a.fallDistance),"rounded"in a&&t(9,_=a.rounded),"cone"in a&&t(10,b=a.cone),"noGravity"in a&&t(11,R=a.noGravity),"xSpread"in a&&t(12,M=a.xSpread),"destroyOnComplete"in a&&t(17,q=a.destroyOnComplete)},[n,s,i,r,o,u,h,c,d,_,b,R,M,A,Y,f,g,q]}class bt extends ae{constructor(e){super(),he(this,e,vt,zt,ce,{size:0,x:1,y:2,duration:3,infinite:4,delay:5,colorRange:15,colorArray:16,amount:6,iterationCount:7,fallDistance:8,rounded:9,cone:10,noGravity:11,xSpread:12,destroyOnComplete:17})}}function wt(l){let e,t="<h1>Enter Puzzle</h1> <p>Paste your puzzle here:</p>",n,s,i,r,o,u="let's play",f,g,h=l[0].parseError&&Ge(l);return{c(){e=C("div"),e.innerHTML=t,n=V(),h&&h.c(),s=V(),i=C("textarea"),r=V(),o=C("button"),o.textContent=u,this.h()},l(c){e=k(c,"DIV",{"data-svelte-h":!0}),fe(e)!=="svelte-1tb1k6x"&&(e.innerHTML=t),n=N(c),h&&h.l(c),s=N(c),i=k(c,"TEXTAREA",{rows:!0}),D(i).forEach(m),r=N(c),o=k(c,"BUTTON",{"data-svelte-h":!0}),fe(o)!=="svelte-nl4m8v"&&(o.textContent=u),this.h()},h(){E(i,"rows","20")},m(c,d){w(c,e,d),w(c,n,d),h&&h.m(c,d),w(c,s,d),w(c,i,d),Ee(i,l[0].inputText),w(c,r,d),w(c,o,d),f||(g=[$(i,"input",l[10]),$(o,"click",l[3])],f=!0)},p(c,d){c[0].parseError?h?h.p(c,d):(h=Ge(c),h.c(),h.m(s.parentNode,s)):h&&(h.d(1),h=null),d&1&&Ee(i,c[0].inputText)},i:P,o:P,d(c){c&&(m(e),m(n),m(s),m(i),m(r),m(o)),h&&h.d(c),f=!1,Ze(g)}}}function Ct(l){let e=pe(l[0].puzzle),t,n,s,i,r,o,u,f,g,h,c,d,_,b,R,M,q,A,Y="⚠️ delete puzzle immediately ⚠️",a,v,B,S=e&&Ue();function be(z){l[5](z)}function j(z){l[6](z)}function W(z){l[7](z)}let J={};l[1]!==void 0&&(J.highlightRow=l[1]),l[2]!==void 0&&(J.highlightBand=l[2]),l[0].puzzle!==void 0&&(J.puzzle=l[0].puzzle),i=new ft({props:J}),le.push(()=>ie(i,"highlightRow",be)),le.push(()=>ie(i,"highlightBand",j)),le.push(()=>ie(i,"puzzle",W));function de(z){l[8](z)}let x={clueTitle:"Rows",clueSection:l[0].puzzle.rows,highlightIdx:l[1]};l[0].puzzle!==void 0&&(x.puzzle=l[0].puzzle),c=new Le({props:x}),le.push(()=>ie(c,"puzzle",de));function te(z){l[9](z)}let Ce={clueTitle:"Bands",clueSection:l[0].puzzle.bands,highlightIdx:l[2],useLetters:!0};return l[0].puzzle!==void 0&&(Ce.puzzle=l[0].puzzle),R=new Le({props:Ce}),le.push(()=>ie(R,"puzzle",te)),{c(){S&&S.c(),t=V(),n=C("div"),s=C("div"),se(i.$$.fragment),f=V(),g=C("div"),h=C("div"),se(c.$$.fragment),_=V(),b=C("div"),se(R.$$.fragment),q=V(),A=C("button"),A.textContent=Y,this.h()},l(z){S&&S.l(z),t=N(z),n=k(z,"DIV",{class:!0});var p=D(n);s=k(p,"DIV",{class:!0});var X=D(s);re(i.$$.fragment,X),X.forEach(m),f=N(p),g=k(p,"DIV",{class:!0});var U=D(g);h=k(U,"DIV",{class:!0});var Z=D(h);re(c.$$.fragment,Z),Z.forEach(m),_=N(U),b=k(U,"DIV",{class:!0});var ke=D(b);re(R.$$.fragment,ke),ke.forEach(m),U.forEach(m),p.forEach(m),q=N(z),A=k(z,"BUTTON",{class:!0,"data-svelte-h":!0}),fe(A)!=="svelte-e2wxiq"&&(A.textContent=Y),this.h()},h(){E(s,"class","puzzle-grid svelte-qukzan"),E(h,"class","clue-set svelte-qukzan"),E(b,"class","clue-set svelte-qukzan"),E(g,"class","clue-sets svelte-qukzan"),E(n,"class","puzzle svelte-qukzan"),E(A,"class","clean-button svelte-qukzan")},m(z,p){S&&S.m(z,p),w(z,t,p),w(z,n,p),I(n,s),ue(i,s,null),I(n,f),I(n,g),I(g,h),ue(c,h,null),I(g,_),I(g,b),ue(R,b,null),w(z,q,p),w(z,A,p),a=!0,v||(B=$(A,"click",l[4]),v=!0)},p(z,p){p&1&&(e=pe(z[0].puzzle)),e?S?p&1&&T(S,1):(S=Ue(),S.c(),T(S,1),S.m(t.parentNode,t)):S&&(ze(),H(S,1,1,()=>{S=null}),ve());const X={};!r&&p&2&&(r=!0,X.highlightRow=z[1],ne(()=>r=!1)),!o&&p&4&&(o=!0,X.highlightBand=z[2],ne(()=>o=!1)),!u&&p&1&&(u=!0,X.puzzle=z[0].puzzle,ne(()=>u=!1)),i.$set(X);const U={};p&1&&(U.clueSection=z[0].puzzle.rows),p&2&&(U.highlightIdx=z[1]),!d&&p&1&&(d=!0,U.puzzle=z[0].puzzle,ne(()=>d=!1)),c.$set(U);const Z={};p&1&&(Z.clueSection=z[0].puzzle.bands),p&4&&(Z.highlightIdx=z[2]),!M&&p&1&&(M=!0,Z.puzzle=z[0].puzzle,ne(()=>M=!1)),R.$set(Z)},i(z){a||(T(S),T(i.$$.fragment,z),T(c.$$.fragment,z),T(R.$$.fragment,z),a=!0)},o(z){H(S),H(i.$$.fragment,z),H(c.$$.fragment,z),H(R.$$.fragment,z),a=!1},d(z){z&&(m(t),m(n),m(q),m(A)),S&&S.d(z),oe(i),oe(c),oe(R),v=!1,B()}}}function Ge(l){let e,t="There was an error parsing the puzzle:",n,s,i=l[0].parseError+"",r;return{c(){e=C("p"),e.textContent=t,n=V(),s=C("pre"),r=F(i)},l(o){e=k(o,"P",{"data-svelte-h":!0}),fe(e)!=="svelte-1p4envb"&&(e.textContent=t),n=N(o),s=k(o,"PRE",{});var u=D(s);r=K(u,i),u.forEach(m)},m(o,u){w(o,e,u),w(o,n,u),w(o,s,u),I(s,r)},p(o,u){u&1&&i!==(i=o[0].parseError+"")&&me(r,i)},d(o){o&&(m(e),m(n),m(s))}}}function Ue(l){let e,t,n;return t=new bt({props:{amount:100,x:[-1.5,3],y:[2.5,1],size:50,infinite:!0,fallDistance:"100vh",cone:!0,rounded:!0,colorArray:["var(--color-theme-1)","var(--color-theme-2)","#C724B1","#71DBD4","#642F6C","#58A7AF","#B3B0C4","#3A3A59"]}}),{c(){e=C("div"),se(t.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0});var i=D(e);re(t.$$.fragment,i),i.forEach(m),this.h()},h(){E(e,"class","confetti-container svelte-qukzan")},m(s,i){w(s,e,i),ue(t,e,null),n=!0},i(s){n||(T(t.$$.fragment,s),n=!0)},o(s){H(t.$$.fragment,s),n=!1},d(s){s&&m(e),oe(t)}}}function kt(l){let e,t,n,s,i;const r=[Ct,wt],o=[];function u(f,g){return f[0].puzzle&&f[0].puzzle.rows&&f[0].puzzle.bands?0:1}return t=u(l),n=o[t]=r[t](l),{c(){e=V(),n.c(),s=ee(),this.h()},l(f){Qe("svelte-n356qm",document.head).forEach(m),e=N(f),n.l(f),s=ee(),this.h()},h(){document.title="drumline"},m(f,g){w(f,e,g),o[t].m(f,g),w(f,s,g),i=!0},p(f,[g]){let h=t;t=u(f),t===h?o[t].p(f,g):(ze(),H(o[h],1,1,()=>{o[h]=null}),ve(),n=o[t],n?n.p(f,g):(n=o[t]=r[t](f),n.c()),T(n,1),n.m(s.parentNode,s))},i(f){i||(T(n),i=!0)},o(f){H(n),i=!1},d(f){f&&(m(e),m(s)),o[t].d(f)}}}function Et(l,e,t){let{data:n}=e,{highlightRow:s=-1}=e,{highlightBand:i=-1}=e;const r=()=>{try{const _=lt(n.inputText);_e.set(_),t(0,n.puzzle=_,n),t(0,n.parseError="",n)}catch(_){_ instanceof Error&&t(0,n.parseError=_.message,n)}},o=()=>{console.log("clean_puzzle called"),t(0,n.inputText="",n),t(0,n.puzzle=null,n),t(0,n.parseError="",n),_e.set(null)};function u(_){s=_,t(1,s)}function f(_){i=_,t(2,i)}function g(_){l.$$.not_equal(n.puzzle,_)&&(n.puzzle=_,t(0,n))}function h(_){l.$$.not_equal(n.puzzle,_)&&(n.puzzle=_,t(0,n))}function c(_){l.$$.not_equal(n.puzzle,_)&&(n.puzzle=_,t(0,n))}function d(){n.inputText=this.value,t(0,n)}return l.$$set=_=>{"data"in _&&t(0,n=_.data),"highlightRow"in _&&t(1,s=_.highlightRow),"highlightBand"in _&&t(2,i=_.highlightBand)},l.$$.update=()=>{l.$$.dirty&1&&n.puzzle&&_e.set(n.puzzle)},[n,s,i,r,o,u,f,g,h,c,d]}class Rt extends ae{constructor(e){super(),he(this,e,Et,kt,ce,{data:0,highlightRow:1,highlightBand:2})}}export{Rt as component,It as universal};
