import{w as je}from"../chunks/index.17a7c208.js";import{s as fe,n as j,r as $e,i as Je,o as Xe,b as X,f as Z,h as et,e as tt,j as lt}from"../chunks/scheduler.ce91eba1.js";import{S as ce,i as ae,g as p,s as N,m as Y,h as C,j as D,x as ne,c as O,f as z,n as x,k as E,a as B,y as b,z as pe,A as ue,o as we,l as S,B as _e,e as le,C as G,d as T,p as me,b as ze,t as L,r as ie,u as se,v as re,w as oe,D as Q,E as nt,F as Ce}from"../chunks/index.433b954a.js";function J(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}const be="drumline-puzzle",Ze=26,it=Array.from({length:Ze},(l,e)=>(e+1).toString()),Qe=Array.from({length:Ze},(l,e)=>String.fromCharCode(e+65)),st=Qe.map(l=>l.toLowerCase()),rt="ROWS",ot="BANDS";function Ee(l,e){const[t]=l.split(e,1),n=l.slice(t.length+e.length);return[t,n]}function ke(l,e){let t=[],n=[...e],s=n.shift();for(const i of l){let[r,u]=Ee(i," ");if(r===s&&(t.push([]),s=n.shift(),[r,u]=Ee(u," ")),t.length===0)continue;let o=t[t.length-1],a=st[o.length];if(r===a)o.push({identifier:a,text:u});else{if(o.length===0)continue;o[o.length-1].text+=" "+i}}return t}function ut(l){let e=[],t=[],n=!1,s=!1,i=null;for(const o of l){const a=o.trim();if(a.length!==0){if(!n&&a===rt){n=!0,i=e;continue}if(!s&&a===ot){s=!0,i=t;continue}i!==null&&i.push(a)}}let r=ke(e,it),u=ke(t,Qe);return[r.map(o=>({clues:o,dividers:[]})),u.map(o=>({clues:o,dividers:[],start_offset:0}))]}var De=l=>{if(l===void 0)return!1;const e=Math.floor(l.size/2);for(let t=0;t<l.size;t++)for(let n=0;n<l.size;n++)if(!(t===e&&n===e)&&l.grid[t][n]===" ")return!1;return!0};const te=(l,e,t)=>{const n=Math.min(l,t-l-1),s=Math.min(e,t-e-1);return Math.min(n,s)},ft=(l,e,t,n)=>{let s=t;if(n)t>0&&(s=s-1);else{const i=Math.floor(l/2);t<l-1&&(s=s+1,s===i&&e===i&&(s=s+1))}return[e,s]};function ct(l,e,t){return e>=0&&e<l&&t>=0&&t<l}const at=(l,e,t,n)=>{const s=[0,1],i=[1,0],r=[0,-1],u=[-1,0],o=te(e,t,l);let a=[];e===o&&a.push(s),e===l-o-1&&a.push(r),t===o&&a.push(u),t===l-o-1&&a.push(i);for(const[f,g]of a){const d=e+(n?-f:f),c=t+(n?-g:g);if(ct(l,d,c)&&te(d,c,l)===o)return[d,c]}throw new Error("Could not find next cell in band")},Ye=(l,e)=>{let t=[];for(let n=e;n<l.size-e;n++)t.push([e,n]);for(let n=e+1;n<l.size-e;n++)t.push([n,l.size-e-1]);for(let n=l.size-e-1;n>=e;n--)t.push([l.size-e-1,n]);for(let n=l.size-e-1;n>=e;n--)t.push([n,e]);return t},Ie=(l,e,t)=>{if(l===void 0)return!1;if(e){const i=Ye(l,t);for(const[r,u]of i)if(l.grid[r][u]===" ")return!1;return!0}let n=t;const s=Math.floor(l.size/2);for(let i=0;i<l.size;i++)if(l.grid[n][i]===" "){if(n===s&&i===s)continue;return!1}return!0};function Re(l){const e=l.split(`
`),[t,n]=ut(e);if(t.length===0)throw new Error("No rows found");if(n.length===0)throw new Error("No bands found");const s=n.length*2+1;if(t.length!==s)throw new Error(`Expected ${s} row(s), because we had ${n.length} band(s) but found ${t.length} row(s) instead`);for(let u=0;u<t.length;u++)if(t[u].clues.length===0)throw new Error(`Row ${u+1} contains no clues`);for(let u=0;u<n.length;u++)if(n[u].clues.length===0)throw new Error(`Band ${u+1} contains no clues`);const i=t.length;let r=[];for(let u=0;u<i;u++){r[u]=[];for(let o=0;o<i;o++)r[u][o]=" "}return{input_text:l,size:t.length,rows:t,bands:n,grid:r}}const Be=window.localStorage.getItem(be)??null,xe=Be?JSON.parse(Be):null,ge=je(xe);ge.subscribe(l=>{l?window.localStorage.setItem(be,JSON.stringify(l)):window.localStorage.removeItem(be)});async function ht(){return{puzzle:xe}}const Ft=Object.freeze(Object.defineProperty({__proto__:null,load:ht},Symbol.toStringTag,{value:"Module"}));function Se(l){let e,t,n="Could not read puzzle",s,i,r;return{c(){e=p("div"),t=p("h3"),t.textContent=n,s=N(),i=p("p"),r=Y(l[1]),this.h()},l(u){e=C(u,"DIV",{class:!0});var o=D(e);t=C(o,"H3",{class:!0,"data-svelte-h":!0}),ne(t)!=="svelte-1vd7mnu"&&(t.textContent=n),s=O(o),i=C(o,"P",{});var a=D(i);r=x(a,l[1]),a.forEach(z),o.forEach(z),this.h()},h(){E(t,"class","svelte-n25fs3"),E(e,"class","puzzle-entry-errors svelte-n25fs3")},m(u,o){B(u,e,o),b(e,t),b(e,s),b(e,i),b(i,r)},p(u,o){o&2&&we(r,u[1])},d(u){u&&z(e)}}}function dt(l){let e,t,n="Solve Marching Band Crossword Puzzles",s,i,r,u,o='<h2 class="svelte-n25fs3">Paste your puzzle below</h2>',a,f,g,d,c,k,V,w,m,y,A="Expected input",_,h,I=`ROWS
1 a first row clue
b second row clue
2 a first row clue
of the second row
b second row clue of the second row
3 a first row clue.


BANDS
A a first band clue
of the outermost band
b if we had a second band,
it would start with a capital B
but we don't since we only have 3
rows.  Instead this clue is just
very long.
`,$,ee,K,ve='<a href="https://www.nytimes.com/2023/06/22/crosswords/variety-marching-bands.html" class="svelte-n25fs3">‚ÑπÔ∏è What are marching band crosswords?</a>',de,he,M=l[1]&&Se(l);return{c(){e=p("div"),t=p("h1"),t.textContent=n,s=N(),i=p("div"),r=p("div"),u=p("div"),u.innerHTML=o,a=N(),f=p("div"),g=p("textarea"),d=N(),c=p("button"),k=Y("ü•Åü•Åü•Å let's play ü•Åü•Åü•Å"),w=N(),m=p("div"),y=p("h2"),y.textContent=A,_=N(),h=p("pre"),h.textContent=I,$=N(),M&&M.c(),ee=N(),K=p("div"),K.innerHTML=ve,this.h()},l(F){e=C(F,"DIV",{class:!0});var H=D(e);t=C(H,"H1",{"data-svelte-h":!0}),ne(t)!=="svelte-r8ske0"&&(t.textContent=n),s=O(H),i=C(H,"DIV",{class:!0});var v=D(i);r=C(v,"DIV",{class:!0});var R=D(r);u=C(R,"DIV",{class:!0,"data-svelte-h":!0}),ne(u)!=="svelte-bl3c63"&&(u.innerHTML=o),a=O(R),f=C(R,"DIV",{class:!0});var U=D(f);g=C(U,"TEXTAREA",{rows:!0,class:!0}),D(g).forEach(z),d=O(U),c=C(U,"BUTTON",{class:!0});var W=D(c);k=x(W,"ü•Åü•Åü•Å let's play ü•Åü•Åü•Å"),W.forEach(z),U.forEach(z),R.forEach(z),w=O(v),m=C(v,"DIV",{class:!0});var P=D(m);y=C(P,"H2",{class:!0,"data-svelte-h":!0}),ne(y)!=="svelte-1q1stvq"&&(y.textContent=A),_=O(P),h=C(P,"PRE",{class:!0,"data-svelte-h":!0}),ne(h)!=="svelte-ndzs7z"&&(h.textContent=I),$=O(P),M&&M.l(P),P.forEach(z),v.forEach(z),ee=O(H),K=C(H,"DIV",{class:!0,"data-svelte-h":!0}),ne(K)!=="svelte-25vgax"&&(K.innerHTML=ve),H.forEach(z),this.h()},h(){E(u,"class","puzzle-entry-instructions"),E(g,"rows","20"),E(g,"class","svelte-n25fs3"),c.disabled=V=l[2]===null,E(c,"class","svelte-n25fs3"),E(f,"class","puzzle-entry-input svelte-n25fs3"),E(r,"class","puzzle-entry-col-1 svelte-n25fs3"),E(y,"class","svelte-n25fs3"),E(h,"class","svelte-n25fs3"),E(m,"class","puzzle-entry-col-2 svelte-n25fs3"),E(i,"class","puzzle-entry-cols svelte-n25fs3"),E(K,"class","puzzle-about svelte-n25fs3"),E(e,"class","puzzle-entry svelte-n25fs3")},m(F,H){B(F,e,H),b(e,t),b(e,s),b(e,i),b(i,r),b(r,u),b(r,a),b(r,f),b(f,g),pe(g,l[0]),b(f,d),b(f,c),b(c,k),b(i,w),b(i,m),b(m,y),b(m,_),b(m,h),b(m,$),M&&M.m(m,null),b(e,ee),b(e,K),de||(he=[ue(g,"input",l[5]),ue(c,"click",l[3])],de=!0)},p(F,[H]){H&1&&pe(g,F[0]),H&4&&V!==(V=F[2]===null)&&(c.disabled=V),F[1]?M?M.p(F,H):(M=Se(F),M.c(),M.m(m,null)):M&&(M.d(1),M=null)},i:j,o:j,d(F){F&&z(e),M&&M.d(),de=!1,$e(he)}}}function gt(l,e,t){let{puzzle:n}=e,{inputText:s=""}=e,{parseError:i=""}=e,{tentativePuzzle:r=null}=e;const u=()=>{try{t(4,n=Re(s)),ge.set(n),t(1,i="")}catch(a){a instanceof Error&&t(1,i=a.message)}};function o(){s=this.value,t(0,s)}return l.$$set=a=>{"puzzle"in a&&t(4,n=a.puzzle),"inputText"in a&&t(0,s=a.inputText),"parseError"in a&&t(1,i=a.parseError),"tentativePuzzle"in a&&t(2,r=a.tentativePuzzle)},l.$$.update=()=>{if(l.$$.dirty&16&&n&&ge.set(n),l.$$.dirty&1)if(s)try{t(2,r=Re(s)),t(1,i="")}catch(a){t(2,r=null),a instanceof Error&&t(1,i=a.message)}else t(2,r=null),t(1,i="")},[s,i,r,u,n,o]}class _t extends ce{constructor(e){super(),ae(this,e,gt,dt,fe,{puzzle:4,inputText:0,parseError:1,tentativePuzzle:2})}}function Ve(l,e,t){const n=l.slice();return n[17]=e[t],n[19]=t,n}function Te(l,e,t){const n=l.slice();return n[17]=e[t],n[21]=t,n}function mt(l){let e,t=l[2].grid[l[19]][l[21]]+"",n,s,i,r;function u(){return l[12](l[19],l[21])}return{c(){e=p("div"),n=Y(t),this.h()},l(o){e=C(o,"DIV",{class:!0});var a=D(e);n=x(a,t),a.forEach(z),this.h()},h(){E(e,"class",s="letter "+l[7](l[19],l[21])+" svelte-11ufol5"),G(e,"selected",l[3]===l[19]&&l[4]===l[21]),G(e,"highlight",l[0]===l[19]||l[1]===te(l[19],l[21],l[5]))},m(o,a){B(o,e,a),b(e,n),i||(r=ue(e,"click",u),i=!0)},p(o,a){l=o,a&4&&t!==(t=l[2].grid[l[19]][l[21]]+"")&&we(n,t),a&128&&s!==(s="letter "+l[7](l[19],l[21])+" svelte-11ufol5")&&E(e,"class",s),a&152&&G(e,"selected",l[3]===l[19]&&l[4]===l[21]),a&163&&G(e,"highlight",l[0]===l[19]||l[1]===te(l[19],l[21],l[5]))},d(o){o&&z(e),i=!1,r()}}}function zt(l){let e,t,n;return{c(){e=p("div"),this.h()},l(s){e=C(s,"DIV",{class:!0}),D(e).forEach(z),this.h()},h(){E(e,"class","letter center-cell svelte-11ufol5")},m(s,i){B(s,e,i),t||(n=ue(e,"click",function(){Je(l[10])&&l[10].apply(this,arguments)}),t=!0)},p(s,i){l=s},d(s){s&&z(e),t=!1,n()}}}function Ae(l){let e;function t(i,r){return i[19]===i[6]&&i[21]===i[6]?zt:mt}let s=t(l)(l);return{c(){s.c(),e=le()},l(i){s.l(i),e=le()},m(i,r){s.m(i,r),B(i,e,r)},p(i,r){s.p(i,r)},d(i){i&&z(e),s.d(i)}}}function Ne(l){let e,t,n=l[19]+1+"",s,i,r,u,o=J({length:l[5]}),a=[];for(let f=0;f<o.length;f+=1)a[f]=Ae(Te(l,o,f));return{c(){e=p("h2"),t=Y("Row "),s=Y(n),i=N(),r=p("div");for(let f=0;f<a.length;f+=1)a[f].c();u=N(),this.h()},l(f){e=C(f,"H2",{class:!0});var g=D(e);t=x(g,"Row "),s=x(g,n),g.forEach(z),i=O(f),r=C(f,"DIV",{class:!0});var d=D(r);for(let c=0;c<a.length;c+=1)a[c].l(d);u=O(d),d.forEach(z),this.h()},h(){E(e,"class","visually-hidden"),E(r,"class","row svelte-11ufol5")},m(f,g){B(f,e,g),b(e,t),b(e,s),B(f,i,g),B(f,r,g);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(r,null);b(r,u)},p(f,g){if(g&1791){o=J({length:f[5]});let d;for(d=0;d<o.length;d+=1){const c=Te(f,o,d);a[d]?a[d].p(c,g):(a[d]=Ae(c),a[d].c(),a[d].m(r,u))}for(;d<a.length;d+=1)a[d].d(1);a.length=o.length}},d(f){f&&(z(e),z(i),z(r)),_e(a,f)}}}function vt(l){let e,t,n,s=J({length:l[5]}),i=[];for(let r=0;r<s.length;r+=1)i[r]=Ne(Ve(l,s,r));return{c(){e=p("div");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=C(r,"DIV",{class:!0,style:!0});var u=D(e);for(let o=0;o<i.length;o+=1)i[o].l(u);u.forEach(z),this.h()},h(){E(e,"class","grid svelte-11ufol5"),S(e,"--puzzle-size",l[5])},m(r,u){B(r,e,u);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null);t||(n=ue(window,"keydown",function(){Je(l[8])&&l[8].apply(this,arguments)}),t=!0)},p(r,[u]){if(l=r,u&1791){s=J({length:l[5]});let o;for(o=0;o<s.length;o+=1){const a=Ve(l,s,o);i[o]?i[o].p(a,u):(i[o]=Ne(a),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=s.length}u&32&&S(e,"--puzzle-size",l[5])},i:j,o:j,d(r){r&&z(e),_e(i,r),t=!1,n()}}}function wt(l,e,t){let{puzzle:n}=e,{size:s=n.rows.length}=e,{highlightRow:i=-1}=e,{highlightBand:r=-1}=e,{selectedRow:u=-1}=e,{selectedCol:o=-1}=e;const a=Math.floor(s/2),f=()=>{if(i!=-1&&(t(1,r=-1),u!==i)){for(let _=0;_<s;_++)if(n.grid[i][_]===" "){t(3,u=i),t(4,o=_);return}t(3,u=i),t(4,o=0)}},g=()=>{if(r==-1||(t(0,i=-1),te(u,o,s)===r))return;const h=Ye(n,r);for(let I=0;I<h.length;I++){const[$,ee]=h[I];if(n.grid[$][ee]===" "){t(3,u=$),t(4,o=ee);return}}t(3,u=r),t(4,o=r)};let{getCellClass:d=(_,h)=>te(_,h,s)%2===0?"even-band":"odd-band"}=e;function c(){return r!==-1}const k=_=>c()?at(n.size,u,o,_):ft(n.size,u,o,_);let{onKeyDown:V=_=>{if(_.altKey||_.ctrlKey||_.metaKey||u===-1||o===-1)return;let h=u,I=o;switch(_.key){case"ArrowDown":h<s-1&&(h=h+1);break;case"ArrowUp":h>0&&(h=h-1);break;case"ArrowLeft":I>0&&(I=I-1);break;case"ArrowRight":I<s-1&&(I=I+1);break;case" ":w(),_.preventDefault();return;case"Backspace":if(n.grid[u][o]===" "){[h,I]=k(!0),t(2,n.grid[h][I]=" ",n),m(h,I),_.preventDefault();return}else{t(2,n.grid[u][o]=" ",n),_.preventDefault();return}default:_.key.length===1&&(t(2,n.grid[u][o]=_.key,n),_.preventDefault()),[h,I]=k(!1)}m(h,I),_.preventDefault()}}=e;function w(){i!==-1?(t(1,r=te(u,o,s)),t(0,i=-1)):(t(0,i=u),t(1,r=-1))}let{highlight:m=(_,h,I=!1)=>{if(u===_&&o===h){I&&w();return}i!==-1?t(0,i=_):t(1,r=te(_,h,s)),t(3,u=_),t(4,o=h)}}=e,{clearHighlight:y=()=>{t(0,i=-1),t(1,r=-1)}}=e;const A=(_,h)=>m(_,h,!0);return l.$$set=_=>{"puzzle"in _&&t(2,n=_.puzzle),"size"in _&&t(5,s=_.size),"highlightRow"in _&&t(0,i=_.highlightRow),"highlightBand"in _&&t(1,r=_.highlightBand),"selectedRow"in _&&t(3,u=_.selectedRow),"selectedCol"in _&&t(4,o=_.selectedCol),"getCellClass"in _&&t(7,d=_.getCellClass),"onKeyDown"in _&&t(8,V=_.onKeyDown),"highlight"in _&&t(9,m=_.highlight),"clearHighlight"in _&&t(10,y=_.clearHighlight)},l.$$.update=()=>{l.$$.dirty&1&&i!==void 0&&f(),l.$$.dirty&2&&r!==void 0&&g()},[i,r,n,u,o,s,a,d,V,m,y,k,A]}class bt extends ce{constructor(e){super(),ae(this,e,wt,vt,fe,{puzzle:2,size:5,highlightRow:0,highlightBand:1,selectedRow:3,selectedCol:4,center:6,getCellClass:7,nextCell:11,onKeyDown:8,highlight:9,clearHighlight:10})}get center(){return this.$$.ctx[6]}get nextCell(){return this.$$.ctx[11]}}function yt(l){let e,t,n=l[0].text+"",s;return{c(){e=p("div"),t=p("div"),s=Y(n),this.h()},l(i){e=C(i,"DIV",{class:!0});var r=D(e);t=C(r,"DIV",{class:!0});var u=D(t);s=x(u,n),u.forEach(z),r.forEach(z),this.h()},h(){E(t,"class","clue-title"),E(e,"class","clue")},m(i,r){B(i,e,r),b(e,t),b(t,s)},p(i,[r]){r&1&&n!==(n=i[0].text+"")&&we(s,n)},i:j,o:j,d(i){i&&z(e)}}}function pt(l,e,t){let{clue:n}=e;return l.$$set=s=>{"clue"in s&&t(0,n=s.clue)},[n]}class Ct extends ce{constructor(e){super(),ae(this,e,pt,yt,fe,{clue:0})}}function Oe(l,e,t){const n=l.slice();return n[7]=e[t],n[9]=t,n}function Me(l,e,t){const n=l.slice();return n[10]=e[t],n}function Et(l){let e=l[9]+1+"",t;return{c(){t=Y(e)},l(n){t=x(n,e)},m(n,s){B(n,t,s)},p:j,d(n){n&&z(t)}}}function kt(l){let e=String.fromCharCode(65+l[9])+"",t;return{c(){t=Y(e)},l(n){t=x(n,e)},m(n,s){B(n,t,s)},p:j,d(n){n&&z(t)}}}function Le(l){let e,t,n,s;return t=new Ct({props:{clue:l[10]}}),{c(){e=p("div"),ie(t.$$.fragment),n=N(),this.h()},l(i){e=C(i,"DIV",{class:!0});var r=D(e);se(t.$$.fragment,r),n=O(r),r.forEach(z),this.h()},h(){E(e,"class","clues-group-clue svelte-1qy37dg")},m(i,r){B(i,e,r),re(t,e,null),b(e,n),s=!0},p(i,r){const u={};r&2&&(u.clue=i[10]),t.$set(u)},i(i){s||(T(t.$$.fragment,i),s=!0)},o(i){L(t.$$.fragment,i),s=!1},d(i){i&&z(e),oe(t)}}}function He(l){let e,t,n,s,i,r,u,o;function a(w,m){return w[3]?kt:Et}let f=a(l),g=f(l),d=J(l[7].clues),c=[];for(let w=0;w<d.length;w+=1)c[w]=Le(Me(l,d,w));const k=w=>L(c[w],1,1,()=>{c[w]=null});function V(){return l[6](l[9])}return{c(){e=p("div"),t=p("div"),g.c(),n=N(),s=p("div");for(let w=0;w<c.length;w+=1)c[w].c();i=N(),this.h()},l(w){e=C(w,"DIV",{class:!0});var m=D(e);t=C(m,"DIV",{class:!0});var y=D(t);g.l(y),y.forEach(z),n=O(m),s=C(m,"DIV",{class:!0});var A=D(s);for(let _=0;_<c.length;_+=1)c[_].l(A);A.forEach(z),i=O(m),m.forEach(z),this.h()},h(){E(t,"class","clues-group-title svelte-1qy37dg"),E(s,"class","clues-group-list svelte-1qy37dg"),E(e,"class","clues-groups-group svelte-1qy37dg"),G(e,"highlightClue",l[0]===l[9]),G(e,"clueDone",Ie(l[4],l[3],l[9]))},m(w,m){B(w,e,m),b(e,t),g.m(t,null),b(e,n),b(e,s);for(let y=0;y<c.length;y+=1)c[y]&&c[y].m(s,null);b(e,i),r=!0,u||(o=ue(e,"click",V),u=!0)},p(w,m){if(l=w,f===(f=a(l))&&g?g.p(l,m):(g.d(1),g=f(l),g&&(g.c(),g.m(t,null))),m&2){d=J(l[7].clues);let y;for(y=0;y<d.length;y+=1){const A=Me(l,d,y);c[y]?(c[y].p(A,m),T(c[y],1)):(c[y]=Le(A),c[y].c(),T(c[y],1),c[y].m(s,null))}for(me(),y=d.length;y<c.length;y+=1)k(y);ze()}(!r||m&1)&&G(e,"highlightClue",l[0]===l[9]),(!r||m&24)&&G(e,"clueDone",Ie(l[4],l[3],l[9]))},i(w){if(!r){for(let m=0;m<d.length;m+=1)T(c[m]);r=!0}},o(w){c=c.filter(Boolean);for(let m=0;m<c.length;m+=1)L(c[m]);r=!1},d(w){w&&z(e),g.d(),_e(c,w),u=!1,o()}}}function Dt(l){let e,t,n,s,i,r,u=J(l[1]),o=[];for(let f=0;f<u.length;f+=1)o[f]=He(Oe(l,u,f));const a=f=>L(o[f],1,1,()=>{o[f]=null});return{c(){e=p("div"),t=p("div"),n=Y(l[2]),s=N(),i=p("div");for(let f=0;f<o.length;f+=1)o[f].c();this.h()},l(f){e=C(f,"DIV",{class:!0});var g=D(e);t=C(g,"DIV",{class:!0});var d=D(t);n=x(d,l[2]),d.forEach(z),s=O(g),i=C(g,"DIV",{class:!0});var c=D(i);for(let k=0;k<o.length;k+=1)o[k].l(c);c.forEach(z),g.forEach(z),this.h()},h(){E(t,"class","clues-title svelte-1qy37dg"),E(i,"class","clues-groups svelte-1qy37dg"),E(e,"class","clues svelte-1qy37dg")},m(f,g){B(f,e,g),b(e,t),b(t,n),b(e,s),b(e,i);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(i,null);r=!0},p(f,[g]){if((!r||g&4)&&we(n,f[2]),g&59){u=J(f[1]);let d;for(d=0;d<u.length;d+=1){const c=Oe(f,u,d);o[d]?(o[d].p(c,g),T(o[d],1)):(o[d]=He(c),o[d].c(),T(o[d],1),o[d].m(i,null))}for(me(),d=u.length;d<o.length;d+=1)a(d);ze()}},i(f){if(!r){for(let g=0;g<u.length;g+=1)T(o[g]);r=!0}},o(f){o=o.filter(Boolean);for(let g=0;g<o.length;g+=1)L(o[g]);r=!1},d(f){f&&z(e),_e(o,f)}}}function It(l,e,t){let{clueSection:n}=e,{clueTitle:s}=e,{useLetters:i=!1}=e,{highlightIdx:r=-1}=e,{puzzle:u}=e;const o=f=>{t(0,r=f)},a=f=>o(f);return l.$$set=f=>{"clueSection"in f&&t(1,n=f.clueSection),"clueTitle"in f&&t(2,s=f.clueTitle),"useLetters"in f&&t(3,i=f.useLetters),"highlightIdx"in f&&t(0,r=f.highlightIdx),"puzzle"in f&&t(4,u=f.puzzle)},[r,n,s,i,u,o,a]}class Pe extends ce{constructor(e){super(),ae(this,e,It,Dt,fe,{clueSection:1,clueTitle:2,useLetters:3,highlightIdx:0,puzzle:4})}}function qe(l,e,t){const n=l.slice();return n[18]=e[t],n}function Ge(l){let e,t=J({length:l[6]}),n=[];for(let s=0;s<t.length;s+=1)n[s]=Fe(qe(l,t,s));return{c(){e=p("div");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=C(s,"DIV",{class:!0});var i=D(e);for(let r=0;r<n.length;r+=1)n[r].l(i);i.forEach(z),this.h()},h(){E(e,"class","confetti-holder svelte-io58ff"),G(e,"rounded",l[9]),G(e,"cone",l[10]),G(e,"no-gravity",l[11])},m(s,i){B(s,e,i);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null)},p(s,i){if(i&20991){t=J({length:s[6]});let r;for(r=0;r<t.length;r+=1){const u=qe(s,t,r);n[r]?n[r].p(u,i):(n[r]=Fe(u),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}i&512&&G(e,"rounded",s[9]),i&1024&&G(e,"cone",s[10]),i&2048&&G(e,"no-gravity",s[11])},d(s){s&&z(e),_e(n,s)}}}function Fe(l){let e;return{c(){e=p("div"),this.h()},l(t){e=C(t,"DIV",{class:!0,style:!0}),D(e).forEach(z),this.h()},h(){E(e,"class","confetti svelte-io58ff"),S(e,"--fall-distance",l[8]),S(e,"--size",l[0]+"px"),S(e,"--color",l[14]()),S(e,"--skew",q(-45,45)+"deg,"+q(-45,45)+"deg"),S(e,"--rotation-xyz",q(-10,10)+", "+q(-10,10)+", "+q(-10,10)),S(e,"--rotation-deg",q(0,360)+"deg"),S(e,"--translate-y-multiplier",q(l[2][0],l[2][1])),S(e,"--translate-x-multiplier",q(l[1][0],l[1][1])),S(e,"--scale",.1*q(2,10)),S(e,"--transition-duration",l[4]?`calc(${l[3]}ms * var(--scale))`:`${l[3]}ms`),S(e,"--transition-delay",q(l[5][0],l[5][1])+"ms"),S(e,"--transition-iteration-count",l[4]?"infinite":l[7]),S(e,"--x-spread",1-l[12])},m(t,n){B(t,e,n)},p(t,n){n&256&&S(e,"--fall-distance",t[8]),n&1&&S(e,"--size",t[0]+"px"),n&4&&S(e,"--translate-y-multiplier",q(t[2][0],t[2][1])),n&2&&S(e,"--translate-x-multiplier",q(t[1][0],t[1][1])),n&24&&S(e,"--transition-duration",t[4]?`calc(${t[3]}ms * var(--scale))`:`${t[3]}ms`),n&32&&S(e,"--transition-delay",q(t[5][0],t[5][1])+"ms"),n&144&&S(e,"--transition-iteration-count",t[4]?"infinite":t[7]),n&4096&&S(e,"--x-spread",1-t[12])},d(t){t&&z(e)}}}function Rt(l){let e,t=!l[13]&&Ge(l);return{c(){t&&t.c(),e=le()},l(n){t&&t.l(n),e=le()},m(n,s){t&&t.m(n,s),B(n,e,s)},p(n,[s]){n[13]?t&&(t.d(1),t=null):t?t.p(n,s):(t=Ge(n),t.c(),t.m(e.parentNode,e))},i:j,o:j,d(n){n&&z(e),t&&t.d(n)}}}function q(l,e){return Math.random()*(e-l)+l}function Bt(l,e,t){let{size:n=10}=e,{x:s=[-.5,.5]}=e,{y:i=[.25,1]}=e,{duration:r=2e3}=e,{infinite:u=!1}=e,{delay:o=[0,50]}=e,{colorRange:a=[0,360]}=e,{colorArray:f=[]}=e,{amount:g=50}=e,{iterationCount:d=1}=e,{fallDistance:c="100px"}=e,{rounded:k=!1}=e,{cone:V=!1}=e,{noGravity:w=!1}=e,{xSpread:m=.15}=e,{destroyOnComplete:y=!0}=e,A=!1;Xe(()=>{!y||u||d=="infinite"||setTimeout(()=>t(13,A=!0),(r+o[1])*d)});function _(){return f.length?f[Math.round(Math.random()*(f.length-1))]:`hsl(${Math.round(q(a[0],a[1]))}, 75%, 50%`}return l.$$set=h=>{"size"in h&&t(0,n=h.size),"x"in h&&t(1,s=h.x),"y"in h&&t(2,i=h.y),"duration"in h&&t(3,r=h.duration),"infinite"in h&&t(4,u=h.infinite),"delay"in h&&t(5,o=h.delay),"colorRange"in h&&t(15,a=h.colorRange),"colorArray"in h&&t(16,f=h.colorArray),"amount"in h&&t(6,g=h.amount),"iterationCount"in h&&t(7,d=h.iterationCount),"fallDistance"in h&&t(8,c=h.fallDistance),"rounded"in h&&t(9,k=h.rounded),"cone"in h&&t(10,V=h.cone),"noGravity"in h&&t(11,w=h.noGravity),"xSpread"in h&&t(12,m=h.xSpread),"destroyOnComplete"in h&&t(17,y=h.destroyOnComplete)},[n,s,i,r,u,o,g,d,c,k,V,w,m,A,_,a,f,y]}class St extends ce{constructor(e){super(),ae(this,e,Bt,Rt,fe,{size:0,x:1,y:2,duration:3,infinite:4,delay:5,colorRange:15,colorArray:16,amount:6,iterationCount:7,fallDistance:8,rounded:9,cone:10,noGravity:11,xSpread:12,destroyOnComplete:17})}}function Ke(l){let e,t,n;return t=new St({props:{amount:100,x:[4,10],y:[0,1],size:50,infinite:!0,fallDistance:"160vh",cone:!0,rounded:!0,colorArray:["var(--color-theme-1)","var(--color-theme-2)","#C724B1","#71DBD4","#642F6C","#58A7AF","#B3B0C4","#3A3A59"]}}),{c(){e=p("div"),ie(t.$$.fragment),this.h()},l(s){e=C(s,"DIV",{class:!0});var i=D(e);se(t.$$.fragment,i),i.forEach(z),this.h()},h(){E(e,"class","confetti-container svelte-ss9jk2")},m(s,i){B(s,e,i),re(t,e,null),n=!0},i(s){n||(T(t.$$.fragment,s),n=!0)},o(s){L(t.$$.fragment,s),n=!1},d(s){s&&z(e),oe(t)}}}function Vt(l){let e=De(l[0]),t,n,s,i,r,u,o,a,f,g,d,c,k,V,w,m,y,A,_,h=e&&Ke();function I(v){l[3](v)}function $(v){l[4](v)}function ee(v){l[5](v)}let K={};l[1]!==void 0&&(K.highlightRow=l[1]),l[2]!==void 0&&(K.highlightBand=l[2]),l[0]!==void 0&&(K.puzzle=l[0]),i=new bt({props:K}),X.push(()=>Q(i,"highlightRow",I)),X.push(()=>Q(i,"highlightBand",$)),X.push(()=>Q(i,"puzzle",ee));function ve(v){l[6](v)}function de(v){l[7](v)}let he={clueTitle:"Rows",clueSection:l[0].rows};l[0]!==void 0&&(he.puzzle=l[0]),l[1]!==void 0&&(he.highlightIdx=l[1]),d=new Pe({props:he}),X.push(()=>Q(d,"puzzle",ve)),X.push(()=>Q(d,"highlightIdx",de));function M(v){l[8](v)}function F(v){l[9](v)}let H={clueTitle:"Bands",clueSection:l[0].bands,useLetters:!0};return l[0]!==void 0&&(H.puzzle=l[0]),l[2]!==void 0&&(H.highlightIdx=l[2]),m=new Pe({props:H}),X.push(()=>Q(m,"puzzle",M)),X.push(()=>Q(m,"highlightIdx",F)),{c(){h&&h.c(),t=N(),n=p("div"),s=p("div"),ie(i.$$.fragment),a=N(),f=p("div"),g=p("div"),ie(d.$$.fragment),V=N(),w=p("div"),ie(m.$$.fragment),this.h()},l(v){h&&h.l(v),t=O(v),n=C(v,"DIV",{class:!0});var R=D(n);s=C(R,"DIV",{class:!0});var U=D(s);se(i.$$.fragment,U),U.forEach(z),a=O(R),f=C(R,"DIV",{class:!0});var W=D(f);g=C(W,"DIV",{class:!0});var P=D(g);se(d.$$.fragment,P),P.forEach(z),V=O(W),w=C(W,"DIV",{class:!0});var ye=D(w);se(m.$$.fragment,ye),ye.forEach(z),W.forEach(z),R.forEach(z),this.h()},h(){E(s,"class","puzzle-grid svelte-ss9jk2"),E(g,"class","clue-set svelte-ss9jk2"),E(w,"class","clue-set svelte-ss9jk2"),E(f,"class","clue-sets svelte-ss9jk2"),E(n,"class","puzzle svelte-ss9jk2")},m(v,R){h&&h.m(v,R),B(v,t,R),B(v,n,R),b(n,s),re(i,s,null),b(n,a),b(n,f),b(f,g),re(d,g,null),b(f,V),b(f,w),re(m,w,null),_=!0},p(v,[R]){R&1&&(e=De(v[0])),e?h?R&1&&T(h,1):(h=Ke(),h.c(),T(h,1),h.m(t.parentNode,t)):h&&(me(),L(h,1,1,()=>{h=null}),ze());const U={};!r&&R&2&&(r=!0,U.highlightRow=v[1],Z(()=>r=!1)),!u&&R&4&&(u=!0,U.highlightBand=v[2],Z(()=>u=!1)),!o&&R&1&&(o=!0,U.puzzle=v[0],Z(()=>o=!1)),i.$set(U);const W={};R&1&&(W.clueSection=v[0].rows),!c&&R&1&&(c=!0,W.puzzle=v[0],Z(()=>c=!1)),!k&&R&2&&(k=!0,W.highlightIdx=v[1],Z(()=>k=!1)),d.$set(W);const P={};R&1&&(P.clueSection=v[0].bands),!y&&R&1&&(y=!0,P.puzzle=v[0],Z(()=>y=!1)),!A&&R&4&&(A=!0,P.highlightIdx=v[2],Z(()=>A=!1)),m.$set(P)},i(v){_||(T(h),T(i.$$.fragment,v),T(d.$$.fragment,v),T(m.$$.fragment,v),_=!0)},o(v){L(h),L(i.$$.fragment,v),L(d.$$.fragment,v),L(m.$$.fragment,v),_=!1},d(v){v&&(z(t),z(n)),h&&h.d(v),oe(i),oe(d),oe(m)}}}function Tt(l,e,t){let{puzzle:n}=e,{highlightRow:s=-1}=e,{highlightBand:i=-1}=e;function r(c){s=c,t(1,s)}function u(c){i=c,t(2,i)}function o(c){n=c,t(0,n)}function a(c){n=c,t(0,n)}function f(c){s=c,t(1,s)}function g(c){n=c,t(0,n)}function d(c){i=c,t(2,i)}return l.$$set=c=>{"puzzle"in c&&t(0,n=c.puzzle),"highlightRow"in c&&t(1,s=c.highlightRow),"highlightBand"in c&&t(2,i=c.highlightBand)},[n,s,i,r,u,o,a,f,g,d]}class At extends ce{constructor(e){super(),ae(this,e,Tt,Vt,fe,{puzzle:0,highlightRow:1,highlightBand:2})}}function Nt(l){return l<.5?4*l*l*l:.5*Math.pow(2*l-2,3)+1}function Ue(l,{delay:e=0,duration:t=400,easing:n=Nt,amount:s=5,opacity:i=0}={}){const r=getComputedStyle(l),u=+r.opacity,o=r.filter==="none"?"":r.filter,a=u*(1-i),[f,g]=et(s);return{delay:e,duration:t,easing:n,css:(d,c)=>`opacity: ${u-a*c}; filter: ${o} blur(${c*f}${g});`}}function We(l){let e,t,n,s;const i=[Mt,Ot],r=[];function u(o,a){return o[0]?0:1}return e=u(l),t=r[e]=i[e](l),{c(){t.c(),n=le()},l(o){t.l(o),n=le()},m(o,a){r[e].m(o,a),B(o,n,a),s=!0},p(o,a){let f=e;e=u(o),e===f?r[e].p(o,a):(me(),L(r[f],1,1,()=>{r[f]=null}),ze(),t=r[e],t?t.p(o,a):(t=r[e]=i[e](o),t.c()),T(t,1),t.m(n.parentNode,n))},i(o){s||(T(t),s=!0)},o(o){L(t),s=!1},d(o){o&&z(n),r[e].d(o)}}}function Ot(l){let e,t,n;function s(r){l[6](r)}let i={};return l[0]!==void 0&&(i.puzzle=l[0]),e=new _t({props:i}),X.push(()=>Q(e,"puzzle",s)),{c(){ie(e.$$.fragment)},l(r){se(e.$$.fragment,r)},m(r,u){re(e,r,u),n=!0},p(r,u){const o={};!t&&u&1&&(t=!0,o.puzzle=r[0],Z(()=>t=!1)),e.$set(o)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){oe(e,r)}}}function Mt(l){let e,t,n,s,i,r="‚ö†Ô∏è delete puzzle immediately ‚ö†Ô∏è",u,o,a,f;function g(c){l[5](c)}let d={};return l[0]!==void 0&&(d.puzzle=l[0]),t=new At({props:d}),X.push(()=>Q(t,"puzzle",g)),{c(){e=p("div"),ie(t.$$.fragment),s=N(),i=p("button"),i.textContent=r,this.h()},l(c){e=C(c,"DIV",{class:!0});var k=D(e);se(t.$$.fragment,k),s=O(k),i=C(k,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(i)!=="svelte-e2wxiq"&&(i.textContent=r),k.forEach(z),this.h()},h(){E(i,"class","clean-button svelte-wgek2m"),E(e,"class","fly-holder svelte-wgek2m")},m(c,k){B(c,e,k),re(t,e,null),b(e,s),b(e,i),o=!0,a||(f=ue(i,"click",l[3]),a=!0)},p(c,k){const V={};!n&&k&1&&(n=!0,V.puzzle=c[0],Z(()=>n=!1)),t.$set(V)},i(c){o||(T(t.$$.fragment,c),c&&lt(()=>{o&&(u||(u=Ce(e,Ue,{amount:"1vw"},!0)),u.run(1))}),o=!0)},o(c){L(t.$$.fragment,c),c&&(u||(u=Ce(e,Ue,{amount:"1vw"},!1)),u.run(0)),o=!1},d(c){c&&z(e),oe(t),c&&u&&u.end(),a=!1,f()}}}function Lt(l){let e,t,n,s=!l[1]&&We(l);return{c(){e=N(),s&&s.c(),t=le(),this.h()},l(i){nt("svelte-n356qm",document.head).forEach(z),e=O(i),s&&s.l(i),t=le(),this.h()},h(){document.title="drumline"},m(i,r){B(i,e,r),s&&s.m(i,r),B(i,t,r),n=!0},p(i,[r]){i[1]?s&&(me(),L(s,1,1,()=>{s=null}),ze()):s?(s.p(i,r),r&2&&T(s,1)):(s=We(i),s.c(),T(s,1),s.m(t.parentNode,t))},i(i){n||(T(s),n=!0)},o(i){L(s),n=!1},d(i){i&&(z(e),z(t)),s&&s.d(i)}}}function Ht(l,e,t){let n;var s=this&&this.__awaiter||function(g,d,c,k){function V(w){return w instanceof c?w:new c(function(m){m(w)})}return new(c||(c=Promise))(function(w,m){function y(h){try{_(k.next(h))}catch(I){m(I)}}function A(h){try{_(k.throw(h))}catch(I){m(I)}}function _(h){h.done?w(h.value):V(h.value).then(y,A)}_((k=k.apply(g,d||[])).next())})};let{data:i}=e,{puzzle:r=i.puzzle}=e;const u=je(!0);tt(l,u,g=>t(1,n=g)),Xe(()=>s(void 0,void 0,void 0,function*(){u.set(!1)}));const o=()=>{t(0,r=null),ge.set(null)};function a(g){r=g,t(0,r)}function f(g){r=g,t(0,r)}return l.$$set=g=>{"data"in g&&t(4,i=g.data),"puzzle"in g&&t(0,r=g.puzzle)},l.$$.update=()=>{l.$$.dirty&1&&r&&ge.set(r)},[r,n,u,o,i,a,f]}class Kt extends ce{constructor(e){super(),ae(this,e,Ht,Lt,fe,{data:4,puzzle:0})}}export{Kt as component,Ft as universal};
