import{w as Xe}from"../chunks/index.17a7c208.js";import{s as fe,n as Z,r as et,i as Ze,o as je,b as Q,f as Y,h as tt,e as lt,j as nt}from"../chunks/scheduler.ce91eba1.js";import{S as ce,i as ae,g as y,s as M,m as te,h as p,j as D,x as ne,c as q,f as m,n as le,k as E,a as R,y as b,z as ye,A as ue,o as _e,l as V,B as me,e as ee,C as G,d as N,p as ze,b as ve,t as P,r as ie,u as se,v as re,w as oe,D as x,E as it,F as pe}from"../chunks/index.433b954a.js";function j(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}const be="drumline-puzzle",Qe=26,st=Array.from({length:Qe},(l,e)=>(e+1).toString()),Ye=Array.from({length:Qe},(l,e)=>String.fromCharCode(e+65)),rt=Ye.map(l=>l.toLowerCase()),ot="ROWS",ut="BANDS";function Ee(l,e){const[t]=l.split(e,1),n=l.slice(t.length+e.length);return[t,n]}function ke(l,e){let t=[],n=[...e],s=n.shift();for(const i of l){let[r,o]=Ee(i," ");if(r===s&&(t.push([]),s=n.shift(),[r,o]=Ee(o," ")),t.length===0)continue;let u=t[t.length-1],a=rt[u.length];if(r===a)u.push({identifier:a,text:o});else{if(u.length===0)continue;u[u.length-1].text+=" "+i}}return t}function ft(l){let e=[],t=[],n=!1,s=!1,i=null;for(const u of l){const a=u.trim();if(a.length!==0){if(!n&&a===ot){n=!0,i=e;continue}if(!s&&a===ut){s=!0,i=t;continue}i!==null&&i.push(a)}}let r=ke(e,st),o=ke(t,Ye);return[r.map(u=>({clues:u,dividers:{}})),o.map(u=>({clues:u,dividers:{},start_offset:0}))]}var De=l=>{if(l===void 0)return!1;const e=Math.floor(l.size/2);for(let t=0;t<l.size;t++)for(let n=0;n<l.size;n++)if(!(t===e&&n===e)&&l.grid[t][n].text===" ")return!1;return!0};const $=(l,e,t)=>{const n=Math.min(l,t-l-1),s=Math.min(e,t-e-1);return Math.min(n,s)},ct=(l,e,t,n)=>{let s=t;if(n)t>0&&(s=s-1);else{const i=Math.floor(l/2);t<l-1&&(s=s+1,s===i&&e===i&&(s=s+1))}return[e,s]};function at(l,e,t){return e>=0&&e<l&&t>=0&&t<l}const ht=(l,e,t,n)=>{const s=[0,1],i=[1,0],r=[0,-1],o=[-1,0],u=$(e,t,l);let a=[];e===u&&a.push(s),e===l-u-1&&a.push(r),t===u&&a.push(o),t===l-u-1&&a.push(i);for(const[f,h]of a){const _=e+(n?-f:f),c=t+(n?-h:h);if(at(l,_,c)&&$(_,c,l)===u)return[_,c]}throw new Error("Could not find next cell in band")},xe=(l,e)=>{let t=[];for(let n=e;n<l.size-e;n++)t.push([e,n]);for(let n=e+1;n<l.size-e;n++)t.push([n,l.size-e-1]);for(let n=l.size-e-1;n>=e;n--)t.push([l.size-e-1,n]);for(let n=l.size-e-1;n>=e;n--)t.push([n,e]);return t},dt=(l,e)=>{const t=xe(l,e);for(let n=0;n<t.length;n++){const[s,i]=t[n];if(l.grid[s][i].text===" ")return[s,i]}return[e,e]},Ie=(l,e,t)=>{if(l===void 0)return!1;if(e){const i=xe(l,t);for(const[r,o]of i)if(l.grid[r][o].text===" ")return!1;return!0}let n=t;const s=Math.floor(l.size/2);for(let i=0;i<l.size;i++)if(l.grid[n][i].text===" "){if(n===s&&i===s)continue;return!1}return!0};function Be(l){const e=l.split(`
`),[t,n]=ft(e);if(t.length===0)throw new Error("No rows found");if(n.length===0)throw new Error("No bands found");const s=n.length*2+1;if(t.length!==s)throw new Error(`Expected ${s} row(s), because we had ${n.length} band(s) but found ${t.length} row(s) instead`);for(let o=0;o<t.length;o++)if(t[o].clues.length===0)throw new Error(`Row ${o+1} contains no clues`);for(let o=0;o<n.length;o++)if(n[o].clues.length===0)throw new Error(`Band ${o+1} contains no clues`);const i=t.length;let r=[];for(let o=0;o<i;o++){r[o]=[];for(let u=0;u<i;u++)r[o][u]={text:" ",band_divider:!1,row_divider:!1}}return{input_text:l,size:t.length,rows:t,bands:n,grid:r}}const Re=window.localStorage.getItem(be)??null,$e=Re?JSON.parse(Re):null,ge=Xe($e);ge.subscribe(l=>{l?window.localStorage.setItem(be,JSON.stringify(l)):window.localStorage.removeItem(be)});async function gt(){return{puzzle:$e}}const Ut=Object.freeze(Object.defineProperty({__proto__:null,load:gt},Symbol.toStringTag,{value:"Module"}));function Se(l){let e,t,n="Could not read puzzle",s,i,r;return{c(){e=y("div"),t=y("h3"),t.textContent=n,s=M(),i=y("p"),r=te(l[1]),this.h()},l(o){e=p(o,"DIV",{class:!0});var u=D(e);t=p(u,"H3",{class:!0,"data-svelte-h":!0}),ne(t)!=="svelte-1vd7mnu"&&(t.textContent=n),s=q(u),i=p(u,"P",{});var a=D(i);r=le(a,l[1]),a.forEach(m),u.forEach(m),this.h()},h(){E(t,"class","svelte-n25fs3"),E(e,"class","puzzle-entry-errors svelte-n25fs3")},m(o,u){R(o,e,u),b(e,t),b(e,s),b(e,i),b(i,r)},p(o,u){u&2&&_e(r,o[1])},d(o){o&&m(e)}}}function _t(l){let e,t,n="Solve Marching Band Crossword Puzzles",s,i,r,o,u='<h2 class="svelte-n25fs3">Paste your puzzle below</h2>',a,f,h,_,c,k,O,v,z,C,S="Expected input",A,d,g=`ROWS
1 a first row clue
b second row clue
2 a first row clue
of the second row
b second row clue of the second row
3 a first row clue.


BANDS
A a first band clue
of the outermost band
b if we had a second band,
it would start with a capital B
but we don't since we only have 3
rows.  Instead this clue is just
very long.
`,I,T,W,we='<a href="https://www.nytimes.com/2023/06/22/crosswords/variety-marching-bands.html" class="svelte-n25fs3">‚ÑπÔ∏è What are marching band crosswords?</a>',de,he,L=l[1]&&Se(l);return{c(){e=y("div"),t=y("h1"),t.textContent=n,s=M(),i=y("div"),r=y("div"),o=y("div"),o.innerHTML=u,a=M(),f=y("div"),h=y("textarea"),_=M(),c=y("button"),k=te("ü•Åü•Åü•Å let's play ü•Åü•Åü•Å"),v=M(),z=y("div"),C=y("h2"),C.textContent=S,A=M(),d=y("pre"),d.textContent=g,I=M(),L&&L.c(),T=M(),W=y("div"),W.innerHTML=we,this.h()},l(U){e=p(U,"DIV",{class:!0});var H=D(e);t=p(H,"H1",{"data-svelte-h":!0}),ne(t)!=="svelte-r8ske0"&&(t.textContent=n),s=q(H),i=p(H,"DIV",{class:!0});var w=D(i);r=p(w,"DIV",{class:!0});var B=D(r);o=p(B,"DIV",{class:!0,"data-svelte-h":!0}),ne(o)!=="svelte-bl3c63"&&(o.innerHTML=u),a=q(B),f=p(B,"DIV",{class:!0});var J=D(f);h=p(J,"TEXTAREA",{rows:!0,class:!0}),D(h).forEach(m),_=q(J),c=p(J,"BUTTON",{class:!0});var X=D(c);k=le(X,"ü•Åü•Åü•Å let's play ü•Åü•Åü•Å"),X.forEach(m),J.forEach(m),B.forEach(m),v=q(w),z=p(w,"DIV",{class:!0});var F=D(z);C=p(F,"H2",{class:!0,"data-svelte-h":!0}),ne(C)!=="svelte-1q1stvq"&&(C.textContent=S),A=q(F),d=p(F,"PRE",{class:!0,"data-svelte-h":!0}),ne(d)!=="svelte-ndzs7z"&&(d.textContent=g),I=q(F),L&&L.l(F),F.forEach(m),w.forEach(m),T=q(H),W=p(H,"DIV",{class:!0,"data-svelte-h":!0}),ne(W)!=="svelte-25vgax"&&(W.innerHTML=we),H.forEach(m),this.h()},h(){E(o,"class","puzzle-entry-instructions"),E(h,"rows","20"),E(h,"class","svelte-n25fs3"),c.disabled=O=l[2]===null,E(c,"class","svelte-n25fs3"),E(f,"class","puzzle-entry-input svelte-n25fs3"),E(r,"class","puzzle-entry-col-1 svelte-n25fs3"),E(C,"class","svelte-n25fs3"),E(d,"class","svelte-n25fs3"),E(z,"class","puzzle-entry-col-2 svelte-n25fs3"),E(i,"class","puzzle-entry-cols svelte-n25fs3"),E(W,"class","puzzle-about svelte-n25fs3"),E(e,"class","puzzle-entry svelte-n25fs3")},m(U,H){R(U,e,H),b(e,t),b(e,s),b(e,i),b(i,r),b(r,o),b(r,a),b(r,f),b(f,h),ye(h,l[0]),b(f,_),b(f,c),b(c,k),b(i,v),b(i,z),b(z,C),b(z,A),b(z,d),b(z,I),L&&L.m(z,null),b(e,T),b(e,W),de||(he=[ue(h,"input",l[5]),ue(c,"click",l[3])],de=!0)},p(U,[H]){H&1&&ye(h,U[0]),H&4&&O!==(O=U[2]===null)&&(c.disabled=O),U[1]?L?L.p(U,H):(L=Se(U),L.c(),L.m(z,null)):L&&(L.d(1),L=null)},i:Z,o:Z,d(U){U&&m(e),L&&L.d(),de=!1,et(he)}}}function mt(l,e,t){let{puzzle:n}=e,{inputText:s=""}=e,{parseError:i=""}=e,{tentativePuzzle:r=null}=e;const o=()=>{try{t(4,n=Be(s)),ge.set(n),t(1,i="")}catch(a){a instanceof Error&&t(1,i=a.message)}};function u(){s=this.value,t(0,s)}return l.$$set=a=>{"puzzle"in a&&t(4,n=a.puzzle),"inputText"in a&&t(0,s=a.inputText),"parseError"in a&&t(1,i=a.parseError),"tentativePuzzle"in a&&t(2,r=a.tentativePuzzle)},l.$$.update=()=>{if(l.$$.dirty&16&&n&&ge.set(n),l.$$.dirty&1)if(s)try{t(2,r=Be(s)),t(1,i="")}catch(a){t(2,r=null),a instanceof Error&&t(1,i=a.message)}else t(2,r=null),t(1,i="")},[s,i,r,o,n,u]}class zt extends ce{constructor(e){super(),ae(this,e,mt,_t,fe,{puzzle:4,inputText:0,parseError:1,tentativePuzzle:2})}}function Ve(l,e,t){const n=l.slice();return n[19]=e[t],n[21]=t,n}function Te(l,e,t){const n=l.slice();return n[19]=e[t],n[23]=t,n}function Ae(l){let e,t;return{c(){e=y("div"),t=te(l[5]),this.h()},l(n){e=p(n,"DIV",{class:!0});var s=D(e);t=le(s,l[5]),s.forEach(m),this.h()},h(){E(e,"class","grid-current-clue svelte-swhb2x")},m(n,s){R(n,e,s),b(e,t)},p(n,s){s&32&&_e(t,n[5])},d(n){n&&m(e)}}}function vt(l){let e,t=l[2].grid[l[21]][l[23]].text+"",n,s,i,r;function o(){return l[13](l[21],l[23])}return{c(){e=y("div"),n=te(t),this.h()},l(u){e=p(u,"DIV",{class:!0});var a=D(e);n=le(a,t),a.forEach(m),this.h()},h(){E(e,"class",s="letter "+l[8](l[21],l[23])+" svelte-swhb2x"),G(e,"selected",l[3]===l[21]&&l[4]===l[23]),G(e,"highlight",l[0]===l[21]||l[1]===$(l[21],l[23],l[6])),G(e,"rowBreak",l[2].grid[l[21]][l[23]].row_divider)},m(u,a){R(u,e,a),b(e,n),i||(r=ue(e,"click",o),i=!0)},p(u,a){l=u,a&4&&t!==(t=l[2].grid[l[21]][l[23]].text+"")&&_e(n,t),a&256&&s!==(s="letter "+l[8](l[21],l[23])+" svelte-swhb2x")&&E(e,"class",s),a&280&&G(e,"selected",l[3]===l[21]&&l[4]===l[23]),a&323&&G(e,"highlight",l[0]===l[21]||l[1]===$(l[21],l[23],l[6])),a&260&&G(e,"rowBreak",l[2].grid[l[21]][l[23]].row_divider)},d(u){u&&m(e),i=!1,r()}}}function wt(l){let e,t,n;return{c(){e=y("div"),this.h()},l(s){e=p(s,"DIV",{class:!0}),D(e).forEach(m),this.h()},h(){E(e,"class","letter center-cell svelte-swhb2x")},m(s,i){R(s,e,i),t||(n=ue(e,"click",function(){Ze(l[11])&&l[11].apply(this,arguments)}),t=!0)},p(s,i){l=s},d(s){s&&m(e),t=!1,n()}}}function Ne(l){let e;function t(i,r){return i[21]===i[7]&&i[23]===i[7]?wt:vt}let s=t(l)(l);return{c(){s.c(),e=ee()},l(i){s.l(i),e=ee()},m(i,r){s.m(i,r),R(i,e,r)},p(i,r){s.p(i,r)},d(i){i&&m(e),s.d(i)}}}function Oe(l){let e,t,n=j({length:l[6]}),s=[];for(let i=0;i<n.length;i+=1)s[i]=Ne(Te(l,n,i));return{c(){e=y("div");for(let i=0;i<s.length;i+=1)s[i].c();t=M(),this.h()},l(i){e=p(i,"DIV",{class:!0});var r=D(e);for(let o=0;o<s.length;o+=1)s[o].l(r);t=q(r),r.forEach(m),this.h()},h(){E(e,"class","row svelte-swhb2x")},m(i,r){R(i,e,r);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null);b(e,t)},p(i,r){if(r&3551){n=j({length:i[6]});let o;for(o=0;o<n.length;o+=1){const u=Te(i,n,o);s[o]?s[o].p(u,r):(s[o]=Ne(u),s[o].c(),s[o].m(e,t))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(i){i&&m(e),me(s,i)}}}function bt(l){let e,t,n,s,i=l[5]&&Ae(l),r=j({length:l[6]}),o=[];for(let u=0;u<r.length;u+=1)o[u]=Oe(Ve(l,r,u));return{c(){i&&i.c(),e=M(),t=y("div");for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){i&&i.l(u),e=q(u),t=p(u,"DIV",{class:!0,style:!0});var a=D(t);for(let f=0;f<o.length;f+=1)o[f].l(a);a.forEach(m),this.h()},h(){E(t,"class","grid svelte-swhb2x"),V(t,"--puzzle-size",l[6])},m(u,a){i&&i.m(u,a),R(u,e,a),R(u,t,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(t,null);n||(s=ue(window,"keydown",function(){Ze(l[9])&&l[9].apply(this,arguments)}),n=!0)},p(u,[a]){if(l=u,l[5]?i?i.p(l,a):(i=Ae(l),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),a&3551){r=j({length:l[6]});let f;for(f=0;f<r.length;f+=1){const h=Ve(l,r,f);o[f]?o[f].p(h,a):(o[f]=Oe(h),o[f].c(),o[f].m(t,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}a&64&&V(t,"--puzzle-size",l[6])},i:Z,o:Z,d(u){u&&(m(e),m(t)),i&&i.d(u),me(o,u),n=!1,s()}}}function Ct(l,e,t){let{puzzle:n}=e,{size:s=n.size}=e,{highlightRow:i=-1}=e,{highlightBand:r=-1}=e,{selectedRow:o=-1}=e,{selectedCol:u=-1}=e,{currentClue:a=""}=e;const f=Math.floor(s/2),h=()=>{if(i!=-1&&(t(1,r=-1),o!==i)){for(let g=0;g<s;g++)if(n.grid[i][g].text===" "){t(3,o=i),t(4,u=g);return}t(3,o=i),t(4,u=0)}},_=()=>{if(r==-1)return;t(0,i=-1);const g=$(o,u,s);g!==r&&t(3,[o,u]=dt(n,g),o,t(4,u))},c=()=>{if(i===-1&&r===-1){t(5,a="");return}if(r>=n.bands.length){t(5,a="");return}const g=i===-1?n.bands[r].clues:n.rows[i].clues;t(5,a=g.map(I=>I.text).join(" / "))};let{getCellClass:k=(g,I)=>$(g,I,s)%2===0?"even-band":"odd-band"}=e;function O(){return r!==-1}const v=g=>O()?ht(n.size,o,u,g):ct(n.size,o,u,g);let{onKeyDown:z=g=>{if(g.altKey||g.ctrlKey||g.metaKey||o===-1||u===-1||r===-1&&i===-1)return;let I=o,T=u;switch(g.key){case"ArrowDown":I<s-1&&(I=I+1);break;case"ArrowUp":I>0&&(I=I-1);break;case"ArrowLeft":T>0&&(T=T-1);break;case"ArrowRight":T<s-1&&(T=T+1);break;case"Tab":[I,T]=v(g.shiftKey),S(I,T),g.preventDefault();return;case" ":C(),g.preventDefault();return;case"Backspace":if(n.grid[o][u].text===" "){[I,T]=v(!0),t(2,n.grid[I][T].text=" ",n),S(I,T),g.preventDefault();return}else{t(2,n.grid[o][u].text=" ",n),g.preventDefault();return}default:if(g.key.length===1)t(2,n.grid[o][u].text=g.key,n),g.preventDefault(),[I,T]=v(!1);else return}S(I,T),g.preventDefault()}}=e;function C(){i!==-1?(t(1,r=$(o,u,s)),t(0,i=-1)):(t(0,i=o),t(1,r=-1))}let{highlight:S=(g,I,T=!1)=>{if(o===g&&u===I){T&&C();return}i!==-1?t(0,i=g):t(1,r=$(g,I,s)),t(3,o=g),t(4,u=I)}}=e,{clearHighlight:A=()=>{t(0,i=-1),t(1,r=-1)}}=e;const d=(g,I)=>S(g,I,!0);return l.$$set=g=>{"puzzle"in g&&t(2,n=g.puzzle),"size"in g&&t(6,s=g.size),"highlightRow"in g&&t(0,i=g.highlightRow),"highlightBand"in g&&t(1,r=g.highlightBand),"selectedRow"in g&&t(3,o=g.selectedRow),"selectedCol"in g&&t(4,u=g.selectedCol),"currentClue"in g&&t(5,a=g.currentClue),"getCellClass"in g&&t(8,k=g.getCellClass),"onKeyDown"in g&&t(9,z=g.onKeyDown),"highlight"in g&&t(10,S=g.highlight),"clearHighlight"in g&&t(11,A=g.clearHighlight)},l.$$.update=()=>{l.$$.dirty&1&&i!==void 0&&h(),l.$$.dirty&2&&r!==void 0&&_(),l.$$.dirty&3&&(i||r)&&c()},[i,r,n,o,u,a,s,f,k,z,S,A,v,d]}class yt extends ce{constructor(e){super(),ae(this,e,Ct,bt,fe,{puzzle:2,size:6,highlightRow:0,highlightBand:1,selectedRow:3,selectedCol:4,currentClue:5,center:7,getCellClass:8,nextCell:12,onKeyDown:9,highlight:10,clearHighlight:11})}get center(){return this.$$.ctx[7]}get nextCell(){return this.$$.ctx[12]}}function pt(l){let e,t,n=l[0].text+"",s;return{c(){e=y("div"),t=y("div"),s=te(n),this.h()},l(i){e=p(i,"DIV",{class:!0});var r=D(e);t=p(r,"DIV",{class:!0});var o=D(t);s=le(o,n),o.forEach(m),r.forEach(m),this.h()},h(){E(t,"class","clue-title"),E(e,"class","clue")},m(i,r){R(i,e,r),b(e,t),b(t,s)},p(i,[r]){r&1&&n!==(n=i[0].text+"")&&_e(s,n)},i:Z,o:Z,d(i){i&&m(e)}}}function Et(l,e,t){let{clue:n}=e;return l.$$set=s=>{"clue"in s&&t(0,n=s.clue)},[n]}class kt extends ce{constructor(e){super(),ae(this,e,Et,pt,fe,{clue:0})}}function Me(l,e,t){const n=l.slice();return n[7]=e[t],n[9]=t,n}function qe(l,e,t){const n=l.slice();return n[10]=e[t],n}function Dt(l){let e=l[9]+1+"",t;return{c(){t=te(e)},l(n){t=le(n,e)},m(n,s){R(n,t,s)},p:Z,d(n){n&&m(t)}}}function It(l){let e=String.fromCharCode(65+l[9])+"",t;return{c(){t=te(e)},l(n){t=le(n,e)},m(n,s){R(n,t,s)},p:Z,d(n){n&&m(t)}}}function Le(l){let e,t,n,s;return t=new kt({props:{clue:l[10]}}),{c(){e=y("div"),ie(t.$$.fragment),n=M(),this.h()},l(i){e=p(i,"DIV",{class:!0});var r=D(e);se(t.$$.fragment,r),n=q(r),r.forEach(m),this.h()},h(){E(e,"class","clues-group-clue svelte-1qy37dg")},m(i,r){R(i,e,r),re(t,e,null),b(e,n),s=!0},p(i,r){const o={};r&2&&(o.clue=i[10]),t.$set(o)},i(i){s||(N(t.$$.fragment,i),s=!0)},o(i){P(t.$$.fragment,i),s=!1},d(i){i&&m(e),oe(t)}}}function Pe(l){let e,t,n,s,i,r,o,u;function a(v,z){return v[3]?It:Dt}let f=a(l),h=f(l),_=j(l[7].clues),c=[];for(let v=0;v<_.length;v+=1)c[v]=Le(qe(l,_,v));const k=v=>P(c[v],1,1,()=>{c[v]=null});function O(){return l[6](l[9])}return{c(){e=y("div"),t=y("div"),h.c(),n=M(),s=y("div");for(let v=0;v<c.length;v+=1)c[v].c();i=M(),this.h()},l(v){e=p(v,"DIV",{class:!0});var z=D(e);t=p(z,"DIV",{class:!0});var C=D(t);h.l(C),C.forEach(m),n=q(z),s=p(z,"DIV",{class:!0});var S=D(s);for(let A=0;A<c.length;A+=1)c[A].l(S);S.forEach(m),i=q(z),z.forEach(m),this.h()},h(){E(t,"class","clues-group-title svelte-1qy37dg"),E(s,"class","clues-group-list svelte-1qy37dg"),E(e,"class","clues-groups-group svelte-1qy37dg"),G(e,"highlightClue",l[0]===l[9]),G(e,"clueDone",Ie(l[4],l[3],l[9]))},m(v,z){R(v,e,z),b(e,t),h.m(t,null),b(e,n),b(e,s);for(let C=0;C<c.length;C+=1)c[C]&&c[C].m(s,null);b(e,i),r=!0,o||(u=ue(e,"click",O),o=!0)},p(v,z){if(l=v,f===(f=a(l))&&h?h.p(l,z):(h.d(1),h=f(l),h&&(h.c(),h.m(t,null))),z&2){_=j(l[7].clues);let C;for(C=0;C<_.length;C+=1){const S=qe(l,_,C);c[C]?(c[C].p(S,z),N(c[C],1)):(c[C]=Le(S),c[C].c(),N(c[C],1),c[C].m(s,null))}for(ze(),C=_.length;C<c.length;C+=1)k(C);ve()}(!r||z&1)&&G(e,"highlightClue",l[0]===l[9]),(!r||z&24)&&G(e,"clueDone",Ie(l[4],l[3],l[9]))},i(v){if(!r){for(let z=0;z<_.length;z+=1)N(c[z]);r=!0}},o(v){c=c.filter(Boolean);for(let z=0;z<c.length;z+=1)P(c[z]);r=!1},d(v){v&&m(e),h.d(),me(c,v),o=!1,u()}}}function Bt(l){let e,t,n,s,i,r,o=j(l[1]),u=[];for(let f=0;f<o.length;f+=1)u[f]=Pe(Me(l,o,f));const a=f=>P(u[f],1,1,()=>{u[f]=null});return{c(){e=y("div"),t=y("div"),n=te(l[2]),s=M(),i=y("div");for(let f=0;f<u.length;f+=1)u[f].c();this.h()},l(f){e=p(f,"DIV",{class:!0});var h=D(e);t=p(h,"DIV",{class:!0});var _=D(t);n=le(_,l[2]),_.forEach(m),s=q(h),i=p(h,"DIV",{class:!0});var c=D(i);for(let k=0;k<u.length;k+=1)u[k].l(c);c.forEach(m),h.forEach(m),this.h()},h(){E(t,"class","clues-title svelte-1qy37dg"),E(i,"class","clues-groups svelte-1qy37dg"),E(e,"class","clues svelte-1qy37dg")},m(f,h){R(f,e,h),b(e,t),b(t,n),b(e,s),b(e,i);for(let _=0;_<u.length;_+=1)u[_]&&u[_].m(i,null);r=!0},p(f,[h]){if((!r||h&4)&&_e(n,f[2]),h&59){o=j(f[1]);let _;for(_=0;_<o.length;_+=1){const c=Me(f,o,_);u[_]?(u[_].p(c,h),N(u[_],1)):(u[_]=Pe(c),u[_].c(),N(u[_],1),u[_].m(i,null))}for(ze(),_=o.length;_<u.length;_+=1)a(_);ve()}},i(f){if(!r){for(let h=0;h<o.length;h+=1)N(u[h]);r=!0}},o(f){u=u.filter(Boolean);for(let h=0;h<u.length;h+=1)P(u[h]);r=!1},d(f){f&&m(e),me(u,f)}}}function Rt(l,e,t){let{clueSection:n}=e,{clueTitle:s}=e,{useLetters:i=!1}=e,{highlightIdx:r=-1}=e,{puzzle:o}=e;const u=f=>{t(0,r=f)},a=f=>u(f);return l.$$set=f=>{"clueSection"in f&&t(1,n=f.clueSection),"clueTitle"in f&&t(2,s=f.clueTitle),"useLetters"in f&&t(3,i=f.useLetters),"highlightIdx"in f&&t(0,r=f.highlightIdx),"puzzle"in f&&t(4,o=f.puzzle)},[r,n,s,i,o,u,a]}class He extends ce{constructor(e){super(),ae(this,e,Rt,Bt,fe,{clueSection:1,clueTitle:2,useLetters:3,highlightIdx:0,puzzle:4})}}function Ge(l,e,t){const n=l.slice();return n[18]=e[t],n}function Fe(l){let e,t=j({length:l[6]}),n=[];for(let s=0;s<t.length;s+=1)n[s]=Ke(Ge(l,t,s));return{c(){e=y("div");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=p(s,"DIV",{class:!0});var i=D(e);for(let r=0;r<n.length;r+=1)n[r].l(i);i.forEach(m),this.h()},h(){E(e,"class","confetti-holder svelte-io58ff"),G(e,"rounded",l[9]),G(e,"cone",l[10]),G(e,"no-gravity",l[11])},m(s,i){R(s,e,i);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null)},p(s,i){if(i&20991){t=j({length:s[6]});let r;for(r=0;r<t.length;r+=1){const o=Ge(s,t,r);n[r]?n[r].p(o,i):(n[r]=Ke(o),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}i&512&&G(e,"rounded",s[9]),i&1024&&G(e,"cone",s[10]),i&2048&&G(e,"no-gravity",s[11])},d(s){s&&m(e),me(n,s)}}}function Ke(l){let e;return{c(){e=y("div"),this.h()},l(t){e=p(t,"DIV",{class:!0,style:!0}),D(e).forEach(m),this.h()},h(){E(e,"class","confetti svelte-io58ff"),V(e,"--fall-distance",l[8]),V(e,"--size",l[0]+"px"),V(e,"--color",l[14]()),V(e,"--skew",K(-45,45)+"deg,"+K(-45,45)+"deg"),V(e,"--rotation-xyz",K(-10,10)+", "+K(-10,10)+", "+K(-10,10)),V(e,"--rotation-deg",K(0,360)+"deg"),V(e,"--translate-y-multiplier",K(l[2][0],l[2][1])),V(e,"--translate-x-multiplier",K(l[1][0],l[1][1])),V(e,"--scale",.1*K(2,10)),V(e,"--transition-duration",l[4]?`calc(${l[3]}ms * var(--scale))`:`${l[3]}ms`),V(e,"--transition-delay",K(l[5][0],l[5][1])+"ms"),V(e,"--transition-iteration-count",l[4]?"infinite":l[7]),V(e,"--x-spread",1-l[12])},m(t,n){R(t,e,n)},p(t,n){n&256&&V(e,"--fall-distance",t[8]),n&1&&V(e,"--size",t[0]+"px"),n&4&&V(e,"--translate-y-multiplier",K(t[2][0],t[2][1])),n&2&&V(e,"--translate-x-multiplier",K(t[1][0],t[1][1])),n&24&&V(e,"--transition-duration",t[4]?`calc(${t[3]}ms * var(--scale))`:`${t[3]}ms`),n&32&&V(e,"--transition-delay",K(t[5][0],t[5][1])+"ms"),n&144&&V(e,"--transition-iteration-count",t[4]?"infinite":t[7]),n&4096&&V(e,"--x-spread",1-t[12])},d(t){t&&m(e)}}}function St(l){let e,t=!l[13]&&Fe(l);return{c(){t&&t.c(),e=ee()},l(n){t&&t.l(n),e=ee()},m(n,s){t&&t.m(n,s),R(n,e,s)},p(n,[s]){n[13]?t&&(t.d(1),t=null):t?t.p(n,s):(t=Fe(n),t.c(),t.m(e.parentNode,e))},i:Z,o:Z,d(n){n&&m(e),t&&t.d(n)}}}function K(l,e){return Math.random()*(e-l)+l}function Vt(l,e,t){let{size:n=10}=e,{x:s=[-.5,.5]}=e,{y:i=[.25,1]}=e,{duration:r=2e3}=e,{infinite:o=!1}=e,{delay:u=[0,50]}=e,{colorRange:a=[0,360]}=e,{colorArray:f=[]}=e,{amount:h=50}=e,{iterationCount:_=1}=e,{fallDistance:c="100px"}=e,{rounded:k=!1}=e,{cone:O=!1}=e,{noGravity:v=!1}=e,{xSpread:z=.15}=e,{destroyOnComplete:C=!0}=e,S=!1;je(()=>{!C||o||_=="infinite"||setTimeout(()=>t(13,S=!0),(r+u[1])*_)});function A(){return f.length?f[Math.round(Math.random()*(f.length-1))]:`hsl(${Math.round(K(a[0],a[1]))}, 75%, 50%`}return l.$$set=d=>{"size"in d&&t(0,n=d.size),"x"in d&&t(1,s=d.x),"y"in d&&t(2,i=d.y),"duration"in d&&t(3,r=d.duration),"infinite"in d&&t(4,o=d.infinite),"delay"in d&&t(5,u=d.delay),"colorRange"in d&&t(15,a=d.colorRange),"colorArray"in d&&t(16,f=d.colorArray),"amount"in d&&t(6,h=d.amount),"iterationCount"in d&&t(7,_=d.iterationCount),"fallDistance"in d&&t(8,c=d.fallDistance),"rounded"in d&&t(9,k=d.rounded),"cone"in d&&t(10,O=d.cone),"noGravity"in d&&t(11,v=d.noGravity),"xSpread"in d&&t(12,z=d.xSpread),"destroyOnComplete"in d&&t(17,C=d.destroyOnComplete)},[n,s,i,r,o,u,h,_,c,k,O,v,z,S,A,a,f,C]}class Tt extends ce{constructor(e){super(),ae(this,e,Vt,St,fe,{size:0,x:1,y:2,duration:3,infinite:4,delay:5,colorRange:15,colorArray:16,amount:6,iterationCount:7,fallDistance:8,rounded:9,cone:10,noGravity:11,xSpread:12,destroyOnComplete:17})}}function Ue(l){let e,t,n;return t=new Tt({props:{amount:100,x:[4,10],y:[0,1],size:50,infinite:!0,fallDistance:"160vh",cone:!0,rounded:!0,colorArray:["var(--color-theme-1)","var(--color-theme-2)","#C724B1","#71DBD4","#642F6C","#58A7AF","#B3B0C4","#3A3A59"]}}),{c(){e=y("div"),ie(t.$$.fragment),this.h()},l(s){e=p(s,"DIV",{class:!0});var i=D(e);se(t.$$.fragment,i),i.forEach(m),this.h()},h(){E(e,"class","confetti-container svelte-10a1sq0")},m(s,i){R(s,e,i),re(t,e,null),n=!0},i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){P(t.$$.fragment,s),n=!1},d(s){s&&m(e),oe(t)}}}function At(l){let e=De(l[0]),t,n,s,i,r,o,u,a,f,h,_,c,k,O,v,z,C,S,A,d=e&&Ue();function g(w){l[3](w)}function I(w){l[4](w)}function T(w){l[5](w)}let W={};l[1]!==void 0&&(W.highlightRow=l[1]),l[2]!==void 0&&(W.highlightBand=l[2]),l[0]!==void 0&&(W.puzzle=l[0]),i=new yt({props:W}),Q.push(()=>x(i,"highlightRow",g)),Q.push(()=>x(i,"highlightBand",I)),Q.push(()=>x(i,"puzzle",T));function we(w){l[6](w)}function de(w){l[7](w)}let he={clueTitle:"Rows",clueSection:l[0].rows};l[0]!==void 0&&(he.puzzle=l[0]),l[1]!==void 0&&(he.highlightIdx=l[1]),_=new He({props:he}),Q.push(()=>x(_,"puzzle",we)),Q.push(()=>x(_,"highlightIdx",de));function L(w){l[8](w)}function U(w){l[9](w)}let H={clueTitle:"Bands",clueSection:l[0].bands,useLetters:!0};return l[0]!==void 0&&(H.puzzle=l[0]),l[2]!==void 0&&(H.highlightIdx=l[2]),z=new He({props:H}),Q.push(()=>x(z,"puzzle",L)),Q.push(()=>x(z,"highlightIdx",U)),{c(){d&&d.c(),t=M(),n=y("div"),s=y("div"),ie(i.$$.fragment),a=M(),f=y("div"),h=y("div"),ie(_.$$.fragment),O=M(),v=y("div"),ie(z.$$.fragment),this.h()},l(w){d&&d.l(w),t=q(w),n=p(w,"DIV",{class:!0});var B=D(n);s=p(B,"DIV",{class:!0});var J=D(s);se(i.$$.fragment,J),J.forEach(m),a=q(B),f=p(B,"DIV",{class:!0});var X=D(f);h=p(X,"DIV",{class:!0});var F=D(h);se(_.$$.fragment,F),F.forEach(m),O=q(X),v=p(X,"DIV",{class:!0});var Ce=D(v);se(z.$$.fragment,Ce),Ce.forEach(m),X.forEach(m),B.forEach(m),this.h()},h(){E(s,"class","puzzle-grid svelte-10a1sq0"),E(h,"class","clue-set svelte-10a1sq0"),E(v,"class","clue-set svelte-10a1sq0"),E(f,"class","clue-sets svelte-10a1sq0"),E(n,"class","puzzle svelte-10a1sq0")},m(w,B){d&&d.m(w,B),R(w,t,B),R(w,n,B),b(n,s),re(i,s,null),b(n,a),b(n,f),b(f,h),re(_,h,null),b(f,O),b(f,v),re(z,v,null),A=!0},p(w,[B]){B&1&&(e=De(w[0])),e?d?B&1&&N(d,1):(d=Ue(),d.c(),N(d,1),d.m(t.parentNode,t)):d&&(ze(),P(d,1,1,()=>{d=null}),ve());const J={};!r&&B&2&&(r=!0,J.highlightRow=w[1],Y(()=>r=!1)),!o&&B&4&&(o=!0,J.highlightBand=w[2],Y(()=>o=!1)),!u&&B&1&&(u=!0,J.puzzle=w[0],Y(()=>u=!1)),i.$set(J);const X={};B&1&&(X.clueSection=w[0].rows),!c&&B&1&&(c=!0,X.puzzle=w[0],Y(()=>c=!1)),!k&&B&2&&(k=!0,X.highlightIdx=w[1],Y(()=>k=!1)),_.$set(X);const F={};B&1&&(F.clueSection=w[0].bands),!C&&B&1&&(C=!0,F.puzzle=w[0],Y(()=>C=!1)),!S&&B&4&&(S=!0,F.highlightIdx=w[2],Y(()=>S=!1)),z.$set(F)},i(w){A||(N(d),N(i.$$.fragment,w),N(_.$$.fragment,w),N(z.$$.fragment,w),A=!0)},o(w){P(d),P(i.$$.fragment,w),P(_.$$.fragment,w),P(z.$$.fragment,w),A=!1},d(w){w&&(m(t),m(n)),d&&d.d(w),oe(i),oe(_),oe(z)}}}function Nt(l,e,t){let{puzzle:n}=e,{highlightRow:s=-1}=e,{highlightBand:i=-1}=e;function r(c){s=c,t(1,s)}function o(c){i=c,t(2,i)}function u(c){n=c,t(0,n)}function a(c){n=c,t(0,n)}function f(c){s=c,t(1,s)}function h(c){n=c,t(0,n)}function _(c){i=c,t(2,i)}return l.$$set=c=>{"puzzle"in c&&t(0,n=c.puzzle),"highlightRow"in c&&t(1,s=c.highlightRow),"highlightBand"in c&&t(2,i=c.highlightBand)},[n,s,i,r,o,u,a,f,h,_]}class Ot extends ce{constructor(e){super(),ae(this,e,Nt,At,fe,{puzzle:0,highlightRow:1,highlightBand:2})}}function Mt(l){return l<.5?4*l*l*l:.5*Math.pow(2*l-2,3)+1}function We(l,{delay:e=0,duration:t=400,easing:n=Mt,amount:s=5,opacity:i=0}={}){const r=getComputedStyle(l),o=+r.opacity,u=r.filter==="none"?"":r.filter,a=o*(1-i),[f,h]=tt(s);return{delay:e,duration:t,easing:n,css:(_,c)=>`opacity: ${o-a*c}; filter: ${u} blur(${c*f}${h});`}}function Je(l){let e,t,n,s;const i=[Lt,qt],r=[];function o(u,a){return u[0]?0:1}return e=o(l),t=r[e]=i[e](l),{c(){t.c(),n=ee()},l(u){t.l(u),n=ee()},m(u,a){r[e].m(u,a),R(u,n,a),s=!0},p(u,a){let f=e;e=o(u),e===f?r[e].p(u,a):(ze(),P(r[f],1,1,()=>{r[f]=null}),ve(),t=r[e],t?t.p(u,a):(t=r[e]=i[e](u),t.c()),N(t,1),t.m(n.parentNode,n))},i(u){s||(N(t),s=!0)},o(u){P(t),s=!1},d(u){u&&m(n),r[e].d(u)}}}function qt(l){let e,t,n;function s(r){l[6](r)}let i={};return l[0]!==void 0&&(i.puzzle=l[0]),e=new zt({props:i}),Q.push(()=>x(e,"puzzle",s)),{c(){ie(e.$$.fragment)},l(r){se(e.$$.fragment,r)},m(r,o){re(e,r,o),n=!0},p(r,o){const u={};!t&&o&1&&(t=!0,u.puzzle=r[0],Y(()=>t=!1)),e.$set(u)},i(r){n||(N(e.$$.fragment,r),n=!0)},o(r){P(e.$$.fragment,r),n=!1},d(r){oe(e,r)}}}function Lt(l){let e,t,n,s,i,r="‚ö†Ô∏è delete puzzle immediately ‚ö†Ô∏è",o,u,a,f;function h(c){l[5](c)}let _={};return l[0]!==void 0&&(_.puzzle=l[0]),t=new Ot({props:_}),Q.push(()=>x(t,"puzzle",h)),{c(){e=y("div"),ie(t.$$.fragment),s=M(),i=y("button"),i.textContent=r,this.h()},l(c){e=p(c,"DIV",{class:!0});var k=D(e);se(t.$$.fragment,k),s=q(k),i=p(k,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(i)!=="svelte-e2wxiq"&&(i.textContent=r),k.forEach(m),this.h()},h(){E(i,"class","clean-button svelte-wgek2m"),E(e,"class","fly-holder svelte-wgek2m")},m(c,k){R(c,e,k),re(t,e,null),b(e,s),b(e,i),u=!0,a||(f=ue(i,"click",l[3]),a=!0)},p(c,k){const O={};!n&&k&1&&(n=!0,O.puzzle=c[0],Y(()=>n=!1)),t.$set(O)},i(c){u||(N(t.$$.fragment,c),c&&nt(()=>{u&&(o||(o=pe(e,We,{amount:"1vw"},!0)),o.run(1))}),u=!0)},o(c){P(t.$$.fragment,c),c&&(o||(o=pe(e,We,{amount:"1vw"},!1)),o.run(0)),u=!1},d(c){c&&m(e),oe(t),c&&o&&o.end(),a=!1,f()}}}function Pt(l){let e,t,n,s=!l[1]&&Je(l);return{c(){e=M(),s&&s.c(),t=ee(),this.h()},l(i){it("svelte-n356qm",document.head).forEach(m),e=q(i),s&&s.l(i),t=ee(),this.h()},h(){document.title="drumline"},m(i,r){R(i,e,r),s&&s.m(i,r),R(i,t,r),n=!0},p(i,[r]){i[1]?s&&(ze(),P(s,1,1,()=>{s=null}),ve()):s?(s.p(i,r),r&2&&N(s,1)):(s=Je(i),s.c(),N(s,1),s.m(t.parentNode,t))},i(i){n||(N(s),n=!0)},o(i){P(s),n=!1},d(i){i&&(m(e),m(t)),s&&s.d(i)}}}function Ht(l,e,t){let n;var s=this&&this.__awaiter||function(h,_,c,k){function O(v){return v instanceof c?v:new c(function(z){z(v)})}return new(c||(c=Promise))(function(v,z){function C(d){try{A(k.next(d))}catch(g){z(g)}}function S(d){try{A(k.throw(d))}catch(g){z(g)}}function A(d){d.done?v(d.value):O(d.value).then(C,S)}A((k=k.apply(h,_||[])).next())})};let{data:i}=e,{puzzle:r=i.puzzle}=e;const o=Xe(!0);lt(l,o,h=>t(1,n=h)),je(()=>s(void 0,void 0,void 0,function*(){o.set(!1)}));const u=()=>{t(0,r=null),ge.set(null)};function a(h){r=h,t(0,r)}function f(h){r=h,t(0,r)}return l.$$set=h=>{"data"in h&&t(4,i=h.data),"puzzle"in h&&t(0,r=h.puzzle)},l.$$.update=()=>{l.$$.dirty&1&&r&&ge.set(r)},[r,n,o,u,i,a,f]}class Wt extends ce{constructor(e){super(),ae(this,e,Ht,Pt,fe,{data:4,puzzle:0})}}export{Wt as component,Ut as universal};
